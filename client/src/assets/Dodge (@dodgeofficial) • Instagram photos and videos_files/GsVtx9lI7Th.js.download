;/*FB_PKG_DELIM*/

__d("DirectRequestsDeclineMultipleButtonFalcoEventDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("DirectRequestsDeclineMultipleButtonFalcoEvent").__setRef("DirectRequestsDeclineMultipleButtonFalcoEventDeferred");function a(a){var b=a.e_counter_channel,c=a.is_interop;h.onReady(function(a){return a.log(function(){return{e_counter_channel:b,is_interop:c}})})}g.logDirectRequestsDeclineMultipleButtonFalcoEvent=a}),98);
__d("DirectRequestsDeclineMultipleConfirmFalcoEventDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("DirectRequestsDeclineMultipleConfirmFalcoEvent").__setRef("DirectRequestsDeclineMultipleConfirmFalcoEventDeferred");function a(a){var b=a.all_used,c=a.e_counter_channel,d=a.is_interop,e=a.num_requests_visible,f=a.num_selected;h.onReady(function(a){return a.log(function(){return{all_used:b,e_counter_channel:c,is_interop:d,num_requests_visible:e,num_selected:f}})})}g.logDirectRequestsDeclineMultipleConfirmFalcoEvent=a}),98);
__d("IGDBaseButton.react",["BaseButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={root:{userSelect:"x87ps6o",":active_opacity":"x1d5wrs8",$$css:!0},rootDisabled:{opacity:"xuzhngd",pointerEvents:"x47corl",$$css:!0}};b=j.forwardRef(a);function a(a,b){var d=i(8),e=a.children,f=a.disabled;a=a.onClick;var g=f===!0&&k.rootDisabled,h;d[0]!==g?(h=[k.root,g],d[0]=g,d[1]=h):h=d[1];d[2]!==f||d[3]!==a||d[4]!==b||d[5]!==h||d[6]!==e?(g=j.jsx(c("BaseButton.react"),{disabled:f,onClick:a,ref:b,xstyle:h,children:e}),d[2]=f,d[3]=a,d[4]=b,d[5]=h,d[6]=e,d[7]=g):g=d[7];return g}e=b;g["default"]=e}),98);
__d("IGDConfirmBulkDeleteMessageRequestsLogger",["DirectRequestsDeclineMultipleConfirmFalcoEventDeferred"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){d("DirectRequestsDeclineMultipleConfirmFalcoEventDeferred").logDirectRequestsDeclineMultipleConfirmFalcoEvent({all_used:a===b,e_counter_channel:"",is_interop:!1,num_requests_visible:a.toString(),num_selected:b.toString()})}g.logConfirmBulkDeleteMessageRequests=a}),98);
__d("IGDOpenBulkDeleteOpenMessageRequestsDialogLogger",["DirectRequestsDeclineMultipleButtonFalcoEventDeferred"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("DirectRequestsDeclineMultipleButtonFalcoEventDeferred").logDirectRequestsDeclineMultipleButtonFalcoEvent({e_counter_channel:"",is_interop:!1})}g.logOpenBulkDeleteOpenMessageRequestsDialog=a}),98);
__d("IGDBulkDeleteMessageRequestsButton.react",["fbt","I64","IGDBaseButton.react","IGDConfirmBulkDeleteMessageRequestsLogger","IGDOpenBulkDeleteOpenMessageRequestsDialogLogger","IGDSText.react","IGDThreadListNewMessageLoggingDataContext","JSResourceForInteraction","MWPThreadsForThreadList","MWThreadListSupportedThreadTypes","MWXacGating","MessengerWebUXLogger","ODS","ReQL","ReQLSuspense","emptyFunction","isMWXacGroupThread","react","useIGDSLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.useState,o=b.c;function a(a){var b=o(24),e=a.parentThreadKey,g=(i||(i=c("useReStore")))(),l;b[0]!==g.tables.threads_ranges_v2__generated||b[1]!==e?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads_ranges_v2__generated).getKeyRange(e)},l=[g.tables.threads_ranges_v2__generated,e],b[0]=g.tables.threads_ranges_v2__generated,b[1]=e,b[2]=a,b[3]=l):(a=b[2],l=b[3]);var q=d("ReQLSuspense").useFirst(a,l,f.id+":51");b[4]!==g||b[5]!==e||b[6]!==q?(a=function(){return d("MWPThreadsForThreadList").createIterable(g,e,q,["threadType","capabilities","capabilities2","capabilities3","capabilities4","threadKey"]).filter(function(a){return c("MWThreadListSupportedThreadTypes").findIndex(function(b){return(j||(j=d("I64"))).equal(a.threadType,b)})!==-1}).filter(function(a){if(d("MWXacGating").isGroupsEnabled())return!0;else return!c("isMWXacGroupThread")(a)})},l=[g,e,q],b[4]=g,b[5]=e,b[6]=q,b[7]=a,b[8]=l):(a=b[7],l=b[8]);var r=d("ReQLSuspense").useArray(a,l,f.id+":58");a=r.length;l=n(!1);var s=l[0],t=l[1];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._("__JHASH__VNroKOFZj79__JHASH__"),b[9]=l):l=b[9];l=l;var u;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(u=c("JSResourceForInteraction")("IGDBulkDeleteMessageRequestsDialog.react").__setRef("IGDBulkDeleteMessageRequestsButton.react"),b[10]=u):u=b[10];u=c("useIGDSLazyDialog")(u);var v=u[0],w=c("MessengerWebUXLogger").useInteractionLogger(),x=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();b[11]!==r?(u=r.map(p),b[11]=r,b[12]=u):u=b[12];var y=u;b[13]!==w||b[14]!==r||b[15]!==y||b[16]!==x||b[17]!==v?(u=function(){w==null?void 0:w({eventName:"delete_all_requests_attempt",extraData:{is_request:"true",thread_count:String(r.length),thread_ids:String(y)},flowInstanceId:x}),v({onDeleteFulfill:function(){t(!1),r.length>0&&d("IGDConfirmBulkDeleteMessageRequestsLogger").logConfirmBulkDeleteMessageRequests(r.length,r.length),w==null?void 0:w({eventName:"delete_all_requests_confirmed",extraData:{is_request:"true",thread_count:String(r.length),thread_ids:String(y)},flowInstanceId:x})},onDeleteStart:function(){return t(!0)},openThreadCount:r.length,threads:r},c("emptyFunction")),(k||(k=d("ODS"))).bumpEntityKey(3185,"igd.message_requests","delete_bulk"),r.length>0&&d("IGDOpenBulkDeleteOpenMessageRequestsDialogLogger").logOpenBulkDeleteOpenMessageRequestsDialog()},b[13]=w,b[14]=r,b[15]=y,b[16]=x,b[17]=v,b[18]=u):u=b[18];u=u;var z;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(z="x1yrsyyn x10b6aqq",b[19]=z):z=b[19];a=a===0||s;b[20]===Symbol["for"]("react.memo_cache_sentinel")?(s=m.jsx(c("IGDSText.react"),{color:"errorOrDestructive",size:"label",textAlign:"start",children:l}),b[20]=s):s=b[20];b[21]!==a||b[22]!==u?(l=m.jsx("div",{className:z,children:m.jsx(c("IGDBaseButton.react"),{disabled:a,onClick:u,children:s})}),b[21]=a,b[22]=u,b[23]=l):l=b[23];return l}function p(a){return(j||(j=d("I64"))).to_string(a.threadKey)}g["default"]=a}),226);
__d("IGDMaster.react",["CometPlaceholder.react","I64","IGDInboxTrayContextProvider","IGDInteractionTraceAnnotations","IGDNullState.react","IGDOpenThreadContainer.react","IGDRouteProvider.react","IGDSSpinner.react","JSResourceForInteraction","lazyLoadComponent","react","useForceUpdate"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useLayoutEffect,l=b.useRef,m=b.c,n=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisInboxTrayComposer.react").__setRef("IGDMaster.react"));function a(){var a=m(4),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e=d("IGDInboxTrayContextProvider").usePolarisInboxTrayContext(),f=e.closeComposer,g=e.isComposerActive;d("IGDInteractionTraceAnnotations").useAddThreadRouteAnnotations();a[0]!==g||a[1]!==f||a[2]!==b?(e=function(){if(g)return j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx("div",{className:"x6s0dn4 x5n08af x78zum5 x5yr21d xl56j7k xyamay9 x1pi30zi x1l90r2v x1swvt13 xh8yej3",children:j.jsx(c("IGDSSpinner.react"),{animated:!0,size:"medium"})}),children:j.jsx(n,{onComposerClose:f})});return b==null?j.jsx(c("IGDNullState.react"),{}):j.jsx(c("IGDOpenThreadContainer.react"),{threadKey:b},(i||(i=d("I64"))).to_string(b))},a[0]=g,a[1]=f,a[2]=b,a[3]=e):e=a[3];a=e;return o(b,a)}function o(a,b){var e=a!=null?(i||(i=d("I64"))).to_string(a):void 0,f=l(e);a=l(null);var g=c("useForceUpdate")(),h=d("IGDInboxTrayContextProvider").usePolarisInboxTrayContext(),j=h.closeComposer,m=h.isComposerActive;k(function(){f.current!==e&&(f.current=e,m&&j(),window.requestAnimationFrame(g))},[g,e,m,j]);if(f.current!==e)return a.current;a.current=b();return a.current}o.displayName=o.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSetupPresenceReportingDeferred.react",["CometPlaceholder.react","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWSetupPresenceReporting.react").__setRef("MWSetupPresenceReportingDeferred.react"));function a(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(j,{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XPlatWebAudioPlaybackContextProvider.react",["cr:6234","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){a=a.children;return a}a.displayName=a.name+" [from "+f.id+"]";e=(c=b("cr:6234")==null?void 0:b("cr:6234").MWPAudioPlaybackContextProvider)!=null?c:a;d=e;g["default"]=d}),98);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","requireDeferred","translatedServerString","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=c("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),l=c("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function a(){var a=(h||(h=c("useReStore")))();return j(function(){if(m.contents)return;m.contents=!0;var b=d("ReQL").fromTableAscending(a.tables.user_visible_errors).subscribe(function(b,d){switch(d.operation){case"add":var e=d.value;b=e.presentationStyle;if(b!=null&&b!=="toast"&&b!=="undefined")return;l.onReady(function(b){b.mwPushErrorToast({body:e.errorBodyText!=null?c("translatedServerString")(e.errorBodyText):void 0,onDismiss:function(){k.onReady(function(b){b.removeUserVisibleErrorFromTable(a,e.errorId)})},title:c("translatedServerString")(e.errorTitleText)})});return;case"put":case"delete":return}});return function(){m.contents=!1;return b()}},[a])}g["default"]=a}),98);
__d("IGDInboxRoot.react",["BaseHeadingContext","CometRouterFocusRegion.react","IGDEntryPoints","IGDInboxActiveNowTrayConversionLoggingContextProvider","IGDInboxLayout.react","IGDInboxTrayContextProvider","IGDMaster.react","MWSetupPresenceReportingDeferred.react","WebUXLoggingEntryPointContextProvider","WebUXLoggingSurfaceContextProvider","XPlatWebAudioPlaybackContextProvider.react","cr:2598","react","useGetStableCometRouterDispatcher","useSubscribeToErrorTableAndShowToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useContext,k=e.c;function l(){var a=k(3),b=j(c("BaseHeadingContext")),d;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=i.jsx(c("IGDMaster.react"),{}),a[0]=d):d=a[0];b=b+1|0;a[1]!==b?(d=i.jsx(c("CometRouterFocusRegion.react"),{children:i.jsx(c("BaseHeadingContext").Provider,{children:d,value:b})}),a[1]=b,a[2]=d):d=a[2];return d}function a(a){a=a.leftRail;c("useSubscribeToErrorTableAndShowToast")();b("cr:2598")==null?void 0:b("cr:2598").useEBShadowTest();return i.jsx(d("IGDInboxTrayContextProvider").IGDInboxTrayContextProvider,{children:i.jsx(d("useGetStableCometRouterDispatcher").CometRouterDispatcherGetterContextProvider,{children:i.jsxs(d("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"inbox",children:[i.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"igd_inbox",children:i.jsx(d("IGDInboxLayout.react").IGDInboxLayoutContainer,{children:i.jsx(c("XPlatWebAudioPlaybackContextProvider.react"),{children:i.jsxs(d("IGDInboxActiveNowTrayConversionLoggingContextProvider").IGDInboxActiveNowTrayConversionLoggingContextProvider,{children:[i.jsx(d("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:d("IGDEntryPoints").IGDEntryPoints.MESSAGES_TAB,children:i.jsx(d("IGDInboxLayout.react").IGDInboxLayoutLeftColumn,{children:a})}),i.jsx(d("IGDInboxLayout.react").IGDInboxLayoutContentArea,{children:i.jsx(l,{})})]})})})}),i.jsx(c("MWSetupPresenceReportingDeferred.react"),{})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDMessageRequestLeftRailLayout.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={desktopRoot:{minWidth:"xwqvltr",$$css:!0},mobileRoot:{borderEndWidth:"xcfux6l",height:"x1dr59a3",$$css:!0},root:{backgroundColor:"xvbhtw8",height:"x5yr21d",outline:"x1a2a7pz",overflowX:"x14aock7",overflowY:"x1rife3k",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=j(9),d=a.children;a=a.isMobile;d=d;a=(a=a)!=null?a:!1;a=a?l.mobileRoot:l.desktopRoot;var e;b[0]!==a?(e=(h||(h=c("stylex")))(l.root,a),b[0]=a,b[1]=e):e=b[1];var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a="x78zum5 x5yr21d xh8yej3",f="xopu45v xu3j5b3 xm81vs4 x1afcbsf x78zum5 xdt5ytf x1us19tq x1n2onr6 xh8yej3",b[2]=a,b[3]=f):(a=b[2],f=b[3]);b[4]!==d?(a=k.jsx("div",{className:a,children:k.jsx("div",{className:f,children:d})}),b[4]=d,b[5]=a):a=b[5];b[6]!==e||b[7]!==a?(f=k.jsx("div",{className:e,children:a}),b[6]=e,b[7]=a,b[8]=f):f=b[8];return f}var m={desktopWidth:{maxWidth:"x1dc814f",$$css:!0},infoBox:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",paddingTop:"xyinxu5",paddingEnd:"xxbr6pl",paddingBottom:"x1g2khh7",paddingStart:"xbbxn1n",textAlign:"x2b8uid",$$css:!0},mobileWidth:{width:"x1qsaak8",$$css:!0}};function b(a){var b=j(5),d=a.children;a=a.isMobile;d=d;a=(a=a)!=null?a:!1;a=a?m.mobileWidth:m.desktopWidth;var e;b[0]!==a?(e=(h||(h=c("stylex")))(m.infoBox,a),b[0]=a,b[1]=e):e=b[1];b[2]!==e||b[3]!==d?(a=k.jsx("div",{className:e,children:d}),b[2]=e,b[3]=d,b[4]=a):a=b[4];return a}function e(a){var b=j(3);a=a.children;a=a;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x6s0dn4 xvbhtw8 x78zum5 xl56j7k xyamay9 x4uap5 x1l90r2v xkhd6sd x2b8uid xh8yej3",b[0]=c):c=b[0];b[1]!==a?(c=k.jsx("div",{className:c,children:a}),b[1]=a,b[2]=c):c=b[2];return c}g.Container=a;g.InfoBox=b;g.Footer=e}),98);
__d("IGDMessageRequestLeftRail.react",["fbt","CometTransientDialogProvider.react","I64","IGDBulkDeleteMessageRequestsButton.react","IGDListCell.react","IGDMessageRequestLeftRailLayout.react","IGDMobileNavigationButton.react","IGDNavigation","IGDSBox.react","IGDSButton.react","IGDSChevronIcon.react","IGDSEyeOffOutlineIcon.react","IGDSText.react","IGDSectionHeader.react","IGDThreadList.react","IGDThreadListNewMessageLoggingDataContext","LSIntEnum","MWPActor.react","MWPThreadsForThreadList","MWVerticalRhythm","MessageRequestStatus","MessengerWebUXLogger","ReQL","ReQLSuspense","WebUXLoggingSurfaceContextProvider","react","useIsCurrentRouteMessageHiddenRequests","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.c;function o(a){var b=n(13),e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),h;b[0]!==e.tables.threads_ranges_v2__generated||b[1]!==a?(h=function(){return d("ReQL").fromTableAscending(e.tables.threads_ranges_v2__generated).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(a))},b[0]=e.tables.threads_ranges_v2__generated,b[1]=a,b[2]=h):h=b[2];var k;b[3]!==e?(k=[e],b[3]=e,b[4]=k):k=b[4];var l=d("ReQLSuspense").useFirst(h,k,f.id+":57");b[5]!==e||b[6]!==a||b[7]!==l?(h=function(){return d("MWPThreadsForThreadList").createIterable(e,(j||(j=d("LSIntEnum"))).ofNumber(a),l,[])},b[5]=e,b[6]=a,b[7]=l,b[8]=h):h=b[8];b[9]!==e||b[10]!==g||b[11]!==l?(k=[e,g,l],b[9]=e,b[10]=g,b[11]=l,b[12]=k):k=b[12];return d("ReQLSuspense").useFirst(h,k,f.id+":65")!=null}function p(a){var b=n(10),e=(i||(i=c("useReStore")))(),g,h;b[0]!==e.tables.message_requests||b[1]!==e.tables.threads||b[2]!==a?(g=function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.message_requests).filter(function(a){return(k||(k=d("I64"))).equal(a.messageRequestStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("MessageRequestStatus").INCOMING_REQUEST))}),d("ReQL").fromTableAscending(e.tables.threads)).filter(function(b){b[0];b=b[1];b=(k||(k=d("I64"))).equal(b.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-3));return a?b:!b})},h=[e.tables.message_requests,e.tables.threads,a],b[0]=e.tables.message_requests,b[1]=e.tables.threads,b[2]=a,b[3]=g,b[4]=h):(g=b[3],h=b[4]);g=d("ReQLSuspense").useArray(g,h,f.id+":80");if(b[5]!==g){h=g.map(r);h=h.map(q);b[5]=g;b[6]=h}else h=b[6];h=h;var l;b[7]!==g.length||b[8]!==h?(l=[g.length,h],b[7]=g.length,b[8]=h,b[9]=l):l=b[9];return l}function q(a){return(k||(k=d("I64"))).to_string(a[0])}function r(a){return a.map(s)}function s(a){return a.threadKey}var t={avatarBackground:{backgroundColor:"x19g9edo",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xnnlda6",width:"x15yg21f",$$css:!0},messageSettingsButton:{marginTop:"x14vqqas",$$css:!0}};function u(a){var b=n(38),e=a.hasRequests,f=a.hiddenRequestsListItem,g=a.info,i=a.isMobile,l=a.onNavigate,o=a.onReturn,q=a.parentThreadKey;a=a.title;var r=p(!0),s=r[0];r=r[1];var u=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();s=String(s);r=String(r);var v;b[0]!==s||b[1]!==r?(v={is_hidden_request:"true",thread_count:s,thread_ids:r},b[0]=s,b[1]=r,b[2]=v):v=b[2];b[3]!==v||b[4]!==u?(s={eventName:"thread_list_rendered",extraData:v,flowInstanceId:u},b[3]=v,b[4]=u,b[5]=s):s=b[5];r=c("MessengerWebUXLogger").useImpressionLoggerRef(s);b[6]===Symbol["for"]("react.memo_cache_sentinel")?(v="x78zum5 xdt5ytf x5yr21d",b[6]=v):v=b[6];b[7]!==o?(u=m.jsx(c("IGDMobileNavigationButton.react"),{onClick:o}),b[7]=o,b[8]=u):u=b[8];b[9]!==a?(s=m.jsx(c("IGDSText.react"),{size:"headline2",weight:"semibold",children:a}),b[9]=a,b[10]=s):s=b[10];b[11]!==i||b[12]!==u||b[13]!==s?(o=m.jsx(c("IGDSectionHeader.react"),{isMobile:i,noBottomBorder:!0,startAdornment:u,children:s}),b[11]=i,b[12]=u,b[13]=s,b[14]=o):o=b[14];b[15]!==g||b[16]!==e||b[17]!==q||b[18]!==l||b[19]!==i?(u=g!=null&&e?m.jsxs(d("IGDMessageRequestLeftRailLayout.react").InfoBox,{isMobile:i,children:[m.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",children:g}),e&&(k||(k=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(-1))?m.jsx(c("IGDSButton.react"),{"data-testid":void 0,label:h._("__JHASH__j8Zdz4qFETd__JHASH__"),onClick:l,variant:"primary_link",xstyle:t.messageSettingsButton}):null]}):null,b[15]=g,b[16]=e,b[17]=q,b[18]=l,b[19]=i,b[20]=u):u=b[20];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(s="x1iyjqo2 x1odjw0f",b[21]=s):s=b[21];g=e?f:void 0;l=e?void 0:f;b[22]!==g||b[23]!==l||b[24]!==a||b[25]!==q?(i=m.jsx(c("IGDThreadList.react"),{afterContent:g,beforeContent:l,gridLabel:a,isMessageRequestRoute:!0,parentThreadKey:q}),b[22]=g,b[23]=l,b[24]=a,b[25]=q,b[26]=i):i=b[26];b[27]!==e||b[28]!==q?(f=e?m.jsx(d("IGDMessageRequestLeftRailLayout.react").Footer,{children:m.jsx(c("IGDBulkDeleteMessageRequestsButton.react"),{parentThreadKey:q})}):null,b[27]=e,b[28]=q,b[29]=f):f=b[29];b[30]!==i||b[31]!==f?(g=m.jsxs("div",{className:s,children:[i,f]}),b[30]=i,b[31]=f,b[32]=g):g=b[32];b[33]!==r||b[34]!==o||b[35]!==u||b[36]!==g?(l=m.jsxs("div",{className:v,ref:r,children:[o,u,g]}),b[33]=r,b[34]=o,b[35]=u,b[36]=g,b[37]=l):l=b[37];return l}function v(a){var b=n(29);a=a.isMobile;var e=d("IGDNavigation").useIGDNavigation(),f=o(-1),g=p(!1),i=g[0];g=g[1];var k=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext();i=String(i);g=String(g);var l;b[0]!==i||b[1]!==g?(l={is_request:"true",requests_count:i,thread_ids:g},b[0]=i,b[1]=g,b[2]=l):l=b[2];b[3]!==l||b[4]!==k?(i={eventName:"thread_list_rendered",extraData:l,flowInstanceId:k},b[3]=l,b[4]=k,b[5]=i):i=b[5];g=c("MessengerWebUXLogger").useImpressionLoggerRef(i);var q=c("MessengerWebUXLogger").useInteractionLogger();b[6]!==e||b[7]!==q||b[8]!==k?(l=function(){e.openHiddenRequests(),q==null?void 0:q({eventName:"visit_hidden_requests",flowInstanceId:k})},b[6]=e,b[7]=q,b[8]=k,b[9]=l):l=b[9];i=l;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(l=m.jsx(c("IGDSChevronIcon.react"),{alt:"Chevron icon to indicate entering the hidden requests window",color:"ig-primary-text",direction:"next",size:16}),b[10]=l):l=b[10];var r,s;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(r=m.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"center",xstyle:t.avatarBackground,children:m.jsx(c("IGDSEyeOffOutlineIcon.react"),{alt:"Eye-off icon for the hidden requests",color:"ig-primary-text",size:24})}),s=m.jsx(c("MWVerticalRhythm"),{height:19}),b[11]=r,b[12]=s):(r=b[11],s=b[12]);b[13]===Symbol["for"]("react.memo_cache_sentinel")?(s=m.jsxs(m.Fragment,{children:[s,m.jsx(c("IGDSText.react"),{color:"primaryText",maxLines:1,size:"body",weight:"normal",children:h._("__JHASH__X7L8UEukC2K__JHASH__")}),m.jsx(c("MWVerticalRhythm"),{height:19})]}),b[13]=s):s=b[13];b[14]!==i||b[15]!==g?(l=m.jsx(c("IGDListCell.react"),{addOnEnd:l,addOnStart:r,content:s,onPress:i,ref:g,size:"large"}),b[14]=i,b[15]=g,b[16]=l):l=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__X3k5rT9Tdly__JHASH__"),b[17]=r):r=b[17];b[18]!==e?(s=function(){return e.goToMessageSettings()},i=function(){return e.goToNullState()},b[18]=e,b[19]=s,b[20]=i):(s=b[19],i=b[20]);var v;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(g=(j||(j=d("LSIntEnum"))).ofNumber(-1),v=h._("__JHASH__1t-ijjLolTC__JHASH__"),b[21]=g,b[22]=v):(g=b[21],v=b[22]);b[23]!==f||b[24]!==l||b[25]!==a||b[26]!==s||b[27]!==i?(r=m.jsx(u,{entryPoint:"inboxThreadList",hasRequests:f,hiddenRequestsListItem:l,info:r,isMobile:a,onNavigate:s,onReturn:i,parentThreadKey:g,title:v}),b[23]=f,b[24]=l,b[25]=a,b[26]=s,b[27]=i,b[28]=r):r=b[28];return r}function w(a){var b=n(9);a=a.isMobile;var c=d("IGDNavigation").useIGDNavigation(),e=o(-3),f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__NsXO8SOtUEO__JHASH__"),b[0]=f):f=b[0];var g;b[1]!==c?(g=function(){return c.openPendingInbox()},b[1]=c,b[2]=g):g=b[2];var i,k;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=(j||(j=d("LSIntEnum"))).ofNumber(-3),k=h._("__JHASH__NUWCEJOzzXk__JHASH__"),b[3]=i,b[4]=k):(i=b[3],k=b[4]);b[5]!==e||b[6]!==a||b[7]!==g?(f=m.jsx(u,{entryPoint:"inboxThreadList",hasRequests:e,info:f,isMobile:a,onReturn:g,parentThreadKey:i,title:k}),b[5]=e,b[6]=a,b[7]=g,b[8]=f):f=b[8];return f}function a(a){var b=n(6);a=a.isMobile;a=a===void 0?!1:a;var e=c("useIsCurrentRouteMessageHiddenRequests")(),f;b[0]!==e||b[1]!==a?(f=e?m.jsx(w,{isMobile:a}):m.jsx(v,{isMobile:a}),b[0]=e,b[1]=a,b[2]=f):f=b[2];e=f;b[3]!==a||b[4]!==e?(f=m.jsx(c("CometTransientDialogProvider.react"),{children:m.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"igd_requests",children:m.jsx(d("IGDMessageRequestLeftRailLayout.react").Container,{isMobile:a,children:e})})}),b[3]=a,b[4]=e,b[5]=f):f=b[5];return f}g["default"]=a}),226);
__d("IGDPartnershipInboxLeftRailLayout.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5);a=a.children;a=a;var c,d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="xvbhtw8 x5yr21d x1a2a7pz x6ikm8r x10wlt62 x1n2onr6 xh8yej3 xwqvltr",d="x78zum5 x5yr21d xh8yej3",e="xopu45v xu3j5b3 xm81vs4 x1afcbsf x78zum5 xdt5ytf x1us19tq x1n2onr6 xh8yej3",b[0]=c,b[1]=d,b[2]=e):(c=b[0],d=b[1],e=b[2]);b[3]!==a?(c=j.jsx("div",{className:c,children:j.jsx("div",{className:d,children:j.jsx("div",{className:e,children:a})})}),b[3]=a,b[4]=c):c=b[4];return c}function b(a){var b=i(3);a=a.children;a=a;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="xnz67gz x78zum5 xdt5ytf xl56j7k x1dc814f xyinxu5 xxbr6pl x1g2khh7 xbbxn1n x2b8uid",b[0]=c):c=b[0];b[1]!==a?(c=j.jsx("div",{className:c,children:a}),b[1]=a,b[2]=c):c=b[2];return c}g.Container=a;g.InfoBox=b}),98);
__d("IGDThreadListNewPartnershipMessageDialogButton.react",["fbt","IGDSComposeOutlineIcon.react","IGDSDialogPlaceholder.react","IGDSIconButton.react","IgBrandedContentEventFalcoEvent","JSResourceForInteraction","react","useIGDSLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.c,m=c("JSResourceForInteraction")("IGDThreadListNewPartnershipMessageDialog.react").__setRef("IGDThreadListNewPartnershipMessageDialogButton.react");function a(){var a=l(6),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0];k(o,b);b=c("useIGDSLazyDialog")(m,n);var d=b[0];a[1]!==d?(b=function(){c("IgBrandedContentEventFalcoEvent").log(function(){return{event_name:"partnership_inbox_header_new_message_click"}}),d({})},a[1]=d,a[2]=b):b=a[2];b=b;var e;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("IGDSComposeOutlineIcon.react"),{alt:h._("__JHASH__dVow5AQddSG__JHASH__"),color:"ig-primary-text"}),a[3]=e):e=a[3];a[4]!==b?(e=j.jsx(c("IGDSIconButton.react"),{onClick:b,children:e}),a[4]=b,a[5]=e):e=a[5];return e}function n(a){return j.jsx(c("IGDSDialogPlaceholder.react"),{fixedHeight:!0,onClose:a,size:"large"})}n.displayName=n.name+" [from "+f.id+"]";function o(){c("IgBrandedContentEventFalcoEvent").log(p)}function p(){return{event_name:"partnership_inbox_header_new_message_impression"}}g["default"]=a}),226);
__d("IGDPartnershipInboxLeftRail.react",["fbt","CometLink.react","CometTransientDialogProvider.react","IGDListCell.react","IGDMobileNavigationButton.react","IGDNavigation","IGDPartnershipInboxLeftRailLayout.react","IGDSText.react","IGDSectionHeader.react","IGDThreadList.react","IGDThreadListNewMessageLoggingDataContext","IGDThreadListNewPartnershipMessageDialogButton.react","LSIntEnum","PolarisDirectStrings","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(i||(i=d("react"))).c,l=i,m={root:{display:"x78zum5",flexDirection:"x1q0g3np",$$css:!0}};function n(a){var b=k(18),e=a.isMobile,f=a.onReturn,g=a.parentThreadKey;a=a.title;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i="x1gryazu",b[0]=i):i=b[0];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(i=l.jsx("div",{className:i,children:l.jsx(d("IGDThreadListNewMessageLoggingDataContext").IGDThreadListNewMessageLoggingContextProvider,{children:l.jsx(c("IGDThreadListNewPartnershipMessageDialogButton.react"),{})})}),b[1]=i):i=b[1];var j;b[2]!==f?(j=l.jsx(c("IGDMobileNavigationButton.react"),{onClick:f}),b[2]=f,b[3]=j):j=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1iyjqo2",b[4]=f):f=b[4];b[5]!==a?(f=l.jsx("div",{className:f,children:l.jsx(c("IGDSText.react"),{size:"headline2",weight:"semibold",children:a})}),b[5]=a,b[6]=f):f=b[6];b[7]!==e||b[8]!==j||b[9]!==f?(i=l.jsx(c("IGDSectionHeader.react"),{endAdornment:i,isMobile:e,startAdornment:j,xstyle:m.root,children:f}),b[7]=e,b[8]=j,b[9]=f,b[10]=i):i=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(e=l.jsx(d("IGDPartnershipInboxLeftRailLayout.react").InfoBox,{children:l.jsx(c("IGDListCell.react"),{content:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"body",weight:"normal",children:h._("__JHASH__3daWJnxK4nX__JHASH__",[h._param("Partner Monetization Policies link",l.jsx(c("CometLink.react"),{color_DEPRECATED:"highlight",href:"https://www.facebook.com/help/instagram/512371932629820",children:"Partner Monetization Policies"}))])}),size:"large"})}),b[11]=e):e=b[11];b[12]!==a||b[13]!==g?(j=l.jsx(c("IGDThreadList.react"),{beforeContent:e,gridLabel:a,parentThreadKey:g}),b[12]=a,b[13]=g,b[14]=j):j=b[14];b[15]!==i||b[16]!==j?(f=l.jsxs(l.Fragment,{children:[i,j]}),b[15]=i,b[16]=j,b[17]=f):f=b[17];return f}function o(a){var b=k(6);a=a.isMobile;var c=d("IGDNavigation").useIGDNavigation(),e;b[0]!==c?(e=function(){return c.goToNullState()},b[0]=c,b[1]=e):e=b[1];var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=(j||(j=d("LSIntEnum"))).ofNumber(-16),b[2]=f):f=b[2];b[3]!==a||b[4]!==e?(f=l.jsx(n,{isMobile:a,onReturn:e,parentThreadKey:f,title:d("PolarisDirectStrings").PARTNERSHIP_MESSAGES}),b[3]=a,b[4]=e,b[5]=f):f=b[5];return f}function a(a){var b=k(2);a=a.isMobile;a=a===void 0?!1:a;var e;b[0]!==a?(e=l.jsx(c("CometTransientDialogProvider.react"),{children:l.jsx(d("IGDPartnershipInboxLeftRailLayout.react").Container,{children:l.jsx(o,{isMobile:a})})}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),226);
__d("PolarisSwitchAccountsModalLegacyConstants",[],(function(a,b,c,d,e,f){"use strict";a=50;b=72;f.FOOTER_HEIGHT=a;f.ITEM_HEIGHT=b}),66);
__d("PolarisSwitchAccountsModalLegacyBody.react",["IGDSBox.react","IGDSCheckbox.react","IGDSListItem.react","IGDSSpinner.react","PolarisAuthActionConstants","PolarisAuthFormCard.react","PolarisFXSSOActions","PolarisIGCoreConstants","PolarisLoginActionLoginWithFBJSSDK","PolarisLoginActionOneTapLogin","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisSwitchAccountsModalLegacyConstants","PolarisUA","PolarisUserAvatar.react","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k="accountSwitcherModal",l=2*d("PolarisSwitchAccountsModalLegacyConstants").ITEM_HEIGHT+8,m=5*d("PolarisSwitchAccountsModalLegacyConstants").ITEM_HEIGHT+8;function a(a){var b=i(18),e=a.fbConnectedUsers,f=a.igConnectedUsers;a=a.oneTapUserIds;var g=d("PolarisReactRedux.react").useDispatch(),h=c("usePolarisViewer")(),r=d("PolarisReactRedux.react").useSelector(p),s=d("PolarisReactRedux.react").useSelector(o),t;if(b[0]!==r||b[1]!==h||b[2]!==e||b[3]!==s||b[4]!==g||b[5]!==a||b[6]!==f){t=Symbol["for"]("react.early_return_sentinel");bb0:{var u=d("PolarisOneTapLoginStorage").getLoginNonces();switch(r){case d("PolarisAuthActionConstants").AUTH.fbLogin:case d("PolarisAuthActionConstants").AUTH.fbAccountPicker:case d("PolarisAuthActionConstants").AUTH.oneTapLogin:var v;b[8]!==h?(v=(h==null?void 0:h.profilePictureUrl)!=null&&(h==null?void 0:h.username)!=null&&j.jsx(c("IGDSListItem.react"),{addOnEnd:j.jsx(c("IGDSCheckbox.react"),{checkboxShape:"circle",isChecked:!0,name:"SwitchAccountsModalCheckbox",onChange:n}),addOnStart:j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:h==null?void 0:h.profilePictureUrl,size:c("PolarisIGCoreConstants").AVATAR_SIZES.large,username:h==null?void 0:h.username}),title:h==null?void 0:h.username}),b[8]=h,b[9]=v):v=b[9];var w;b[10]!==e||b[11]!==s||b[12]!==g?(w=e!=null&&(e==null?void 0:e.length)!==0&&s!=null&&e.map(function(a){return j.jsx(q,{onClick:function(){return g(d("PolarisLoginActionLoginWithFBJSSDK").loginWithFBJSSDK({pageID:k,source:k},a.username))},profilePictureUrl:a.profilePictureUrl,userId:s,username:a.username},a.username)}),b[10]=e,b[11]=s,b[12]=g,b[13]=w):w=b[13];var x;b[14]!==f||b[15]!==g?(x=f!=null&&(f==null?void 0:f.length)!==0&&f.map(function(a){return j.jsx(q,{onClick:function(){return g(d("PolarisFXSSOActions").loginWithIGSSO(a.username))},profilePictureUrl:a.profilePictureUrl,userId:null,username:a.username},a.username)}),b[14]=f,b[15]=g,b[16]=x):x=b[16];t=j.jsxs(c("IGDSBox.react"),{flex:"grow",maxHeight:d("PolarisUA").isDesktop()?m:void 0,minHeight:d("PolarisUA").isDesktop()?l:void 0,overflow:"auto",position:"relative",children:[v,w,a.map(function(a){var b=u[a],c=b.nonce,e=b.profilePicUrl;b=b.username;var f=function b(){g(d("PolarisLoginActionOneTapLogin").switchAccountLogin({loginNonce:c,retry:b,userId:a}))};return j.jsx(q,{onClick:f,profilePictureUrl:e,userId:a,username:b},a)}),x]});break bb0;case d("PolarisAuthActionConstants").AUTH.login:case d("PolarisAuthActionConstants").AUTH.twoFactor:case d("PolarisAuthActionConstants").AUTH.signup:b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("IGDSBox.react"),{alignItems:"center",maxHeight:800,overflow:"auto",position:"relative",children:j.jsx(c("PolarisAuthFormCard.react"),{hideAppUpsells:!0,hideBorder:!0,pageIdentifier:k,style:"modal",useMobileFooterPadding:!1})}),b[17]=v):v=b[17];t=v;break bb0;default:t=null;break bb0}}b[0]=r;b[1]=h;b[2]=e;b[3]=s;b[4]=g;b[5]=a;b[6]=f;b[7]=t}else t=b[7];if(t!==Symbol["for"]("react.early_return_sentinel"))return t}function n(){}function o(a){return a==null?void 0:(a=a.fb)==null?void 0:(a=a.authResponse)==null?void 0:a.userID}function p(a){return a.auth.authType}function q(a){var b,e=i(18),f=a.onClick,g=a.profilePictureUrl,h=a.userId;a=a.username;var k=(b=d("PolarisReactRedux.react")).useSelector(v),l=b.useSelector(u),m=b.useSelector(t),n=b.useSelector(s);b=b.useSelector(r);var o;e[0]!==k||e[1]!==h||e[2]!==l||e[3]!==m||e[4]!==a||e[5]!==n||e[6]!==b?(o=k&&h!==null&&l===h&&(m==null||m===a)||n&&a===b?j.jsx(c("IGDSSpinner.react"),{}):void 0,e[0]=k,e[1]=h,e[2]=l,e[3]=m,e[4]=a,e[5]=n,e[6]=b,e[7]=o):o=e[7];e[8]!==g||e[9]!==a?(k=j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:g,size:c("PolarisIGCoreConstants").AVATAR_SIZES.large,username:a}),e[8]=g,e[9]=a,e[10]=k):k=e[10];e[11]!==f?(h=function(){f()},e[11]=f,e[12]=h):h=e[12];e[13]!==o||e[14]!==k||e[15]!==h||e[16]!==a?(l=j.jsx(c("IGDSListItem.react"),{addOnEnd:o,addOnStart:k,onPress:h,title:a}),e[13]=o,e[14]=k,e[15]=h,e[16]=a,e[17]=l):l=e[17];return l}function r(a){return a.fxSSO.ssoUsername}function s(a){return a.fxSSO.requestInFlight}function t(a){return(a=a.auth.login)==null?void 0:a.igUsername}function u(a){return(a=a.auth.login)==null?void 0:a.userId}function v(a){var b;return((b=a.auth.login)==null?void 0:b.requestInFlight)||((b=a.auth.twoFactor)==null?void 0:b.requestInFlight)||!1}g["default"]=a}),98);
__d("PolarisSwitchAccountsModalLegacyFooter.react",["IGDSBox.react","IGDSButton.react","IGDSDivider.react","PolarisAuthActionConstants","PolarisAuthActions","PolarisNavigationStrings","PolarisReactRedux.react","PolarisSignupTypes","PolarisSwitchAccountsModalLegacyConstants","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(7);a=a.numAccounts;var e=d("PolarisReactRedux.react").useDispatch(),f=d("PolarisReactRedux.react").useSelector(l),g=d("PolarisReactRedux.react").useSelector(k),h;b[0]!==e?(h=function(a){e(d("PolarisAuthActions").switchAuthType(a))},b[0]=e,b[1]=h):h=b[1];var m=h,n;bb0:switch(f){case d("PolarisAuthActionConstants").AUTH.fbLogin:case d("PolarisAuthActionConstants").AUTH.fbAccountPicker:case d("PolarisAuthActionConstants").AUTH.oneTapLogin:b[2]!==m?(h=j.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisNavigationStrings").LOG_IN_EXISTING_ACCOUNT,onClick:function(){return m(d("PolarisAuthActionConstants").AUTH.login)},variant:"primary_link"}),b[2]=m,b[3]=h):h=b[3];n=h;break bb0;case d("PolarisAuthActionConstants").AUTH.signup:if(g!==d("PolarisSignupTypes").STEP.base)return null;case d("PolarisAuthActionConstants").AUTH.login:case d("PolarisAuthActionConstants").AUTH.twoFactor:default:return null}b[4]!==n||b[5]!==a?(f=n!=null?j.jsxs(j.Fragment,{children:[(d("PolarisUA").isDesktop()||d("PolarisUA").isMobile()&&a>1)&&j.jsx(c("IGDSDivider.react"),{}),j.jsx(c("IGDSBox.react"),{alignItems:"center",height:d("PolarisSwitchAccountsModalLegacyConstants").FOOTER_HEIGHT,justifyContent:"center",position:"relative",children:n})]}):null,b[4]=n,b[5]=a,b[6]=f):f=b[6];return f}function k(a){return(a=a.auth.signup)==null?void 0:a.step}function l(a){return a.auth.authType}g["default"]=a}),98);
__d("PolarisSwitchAccountsModalLegacyHeader.react",["IGDSBox.react","IGDSDivider.react","IGDSIconButton.react","IGDSXPanoFilledIcon.react","PolarisAuthActionConstants","PolarisAuthStrings","PolarisGenericStrings","PolarisIGCoreModalHeader.react","PolarisIGCoreText","PolarisReactRedux.react","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(6);a=a.onClose;var e=d("PolarisReactRedux.react").useSelector(k);switch(e){case d("PolarisAuthActionConstants").AUTH.fbLogin:case d("PolarisAuthActionConstants").AUTH.fbAccountPicker:case d("PolarisAuthActionConstants").AUTH.oneTapLogin:if(d("PolarisUA").isDesktop()){b[0]!==a?(e=j.jsx(c("PolarisIGCoreModalHeader.react"),{onClose:a,truncateText:!0,children:d("PolarisAuthStrings").SWITCH_ACCOUNTS}),b[0]=a,b[1]=e):e=b[1];return e}b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsxs(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:[j.jsx(c("IGDSBox.react"),{marginBottom:1,paddingX:4,paddingY:3,position:"relative",children:j.jsx(c("PolarisIGCoreText"),{display:"truncated",size:"label",weight:"semibold",children:d("PolarisAuthStrings").SWITCH_ACCOUNTS})}),j.jsx(c("IGDSDivider.react"),{})]}),b[2]=e):e=b[2];return e;case d("PolarisAuthActionConstants").AUTH.login:case d("PolarisAuthActionConstants").AUTH.twoFactor:case d("PolarisAuthActionConstants").AUTH.signup:if(d("PolarisUA").isMobile())return null;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("IGDSXPanoFilledIcon.react"),{alt:d("PolarisGenericStrings").CLOSE_TEXT,size:18}),b[3]=e):e=b[3];b[4]!==a?(e=j.jsx(c("IGDSBox.react"),{alignItems:"end",marginTop:3,paddingX:3,position:"relative",children:j.jsx(c("IGDSIconButton.react"),{onClick:a,children:e})}),b[4]=a,b[5]=e):e=b[5];return e;default:return null}}function k(a){return a.auth.authType}g["default"]=a}),98);
__d("PolarisSwitchAccountsModalLegacy.react",["IGCoreModal.react","IGDSBox.react","PolarisAccountSwitcherActions","PolarisAuthActionConstants","PolarisAuthActions","PolarisFBConnectHelpers","PolarisIGCoreSheet.react","PolarisOneTapLoginStorage","PolarisReactRedux.react","PolarisSwitchAccountsModalLegacyBody.react","PolarisSwitchAccountsModalLegacyConstants","PolarisSwitchAccountsModalLegacyFooter.react","PolarisSwitchAccountsModalLegacyHeader.react","PolarisUA","Promise","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=1,m=69;function n(a){var b=window.innerHeight;a=a*d("PolarisSwitchAccountsModalLegacyConstants").ITEM_HEIGHT+m+(d("PolarisSwitchAccountsModalLegacyConstants").FOOTER_HEIGHT+l);a=a/b*100;return Math.round(a)+1}function a(){var a,e=j(28),f=d("PolarisReactRedux.react").useDispatch(),g=c("usePolarisViewer")(),i=d("PolarisReactRedux.react").useSelector(q),l;e[0]!==f?(l=function(){(h||(h=b("Promise"))).resolve(f(d("PolarisAccountSwitcherActions").closeAccountSwitcher())).then(function(){return f(d("PolarisAuthActions").resetAuth())})},e[0]=f,e[1]=l):l=e[1];l=l;var m=(a=d("PolarisReactRedux.react").useSelector(p))==null?void 0:a.filter(function(a){return a.username!==(g==null?void 0:g.username)&&d("PolarisFBConnectHelpers").isFBCUnique(a.username)});a=(a=d("PolarisReactRedux.react").useSelector(o))==null?void 0:a.filter(function(a){return a.username!==(g==null?void 0:g.username)&&d("PolarisFBConnectHelpers").isFBCUnique(a.username)&&(!m||!m.some(function(b){return b.username===a.username}))});if(e[2]!==g){var r=d("PolarisOneTapLoginStorage").getLoginNonces();r=Object.keys(r).filter(function(a){return a!==(g==null?void 0:g.id)});e[2]=g;e[3]=r}else r=e[3];r=r;var s=(g!=null?1:0)+(m!=null?m.length:0)+r.length+(a!=null?a.length:0),t;e[4]!==l?(t=k.jsx(c("PolarisSwitchAccountsModalLegacyHeader.react"),{onClose:l}),e[4]=l,e[5]=t):t=e[5];var u;e[6]!==m||e[7]!==a||e[8]!==r?(u=k.jsx(c("PolarisSwitchAccountsModalLegacyBody.react"),{fbConnectedUsers:m,igConnectedUsers:a,oneTapUserIds:r}),e[6]=m,e[7]=a,e[8]=r,e[9]=u):u=e[9];e[10]!==s?(a=k.jsx(c("PolarisSwitchAccountsModalLegacyFooter.react"),{numAccounts:s}),e[10]=s,e[11]=a):a=e[11];e[12]!==t||e[13]!==u||e[14]!==a?(r=k.jsxs(c("IGDSBox.react"),{"data-testid":void 0,height:"100%",children:[t,u,a]}),e[12]=t,e[13]=u,e[14]=a,e[15]=r):r=e[15];t=r;if(d("PolarisUA").isDesktop()||d("PolarisUA").isMobile()&&(i===d("PolarisAuthActionConstants").AUTH.login||i===d("PolarisAuthActionConstants").AUTH.twoFactor)){e[16]!==l||e[17]!==t?(u=k.jsx(c("IGCoreModal.react"),{closeButtonPosition:d("PolarisUA").isMobile()?"background":void 0,disablePopInAnimation:!0,onClose:l,children:t}),e[16]=l,e[17]=t,e[18]=u):u=e[18];return u}a=n(s);if(a>=100){e[19]===Symbol["for"]("react.memo_cache_sentinel")?(r=["100%"],e[19]=r):r=e[19];i=r}else if(s<=3||a<=50){u=a+"%";e[20]!==u?(r=[u],e[20]=u,e[21]=r):r=e[21];i=r}else{s=a+"%";e[22]!==s?(u=["50%",s],e[22]=s,e[23]=u):u=e[23];i=u}e[24]!==l||e[25]!==i||e[26]!==t?(r=k.jsx(c("PolarisIGCoreSheet.react"),{onClose:l,stops:i,children:t}),e[24]=l,e[25]=i,e[26]=t,e[27]=r):r=e[27];return r}function o(a){return a.fxSSO.igProfiles}function p(a){return a.fb.igProfiles}function q(a){return a.auth.authType}g["default"]=a}),98);
__d("PolarisSwitchAccountsModal.react",["PolarisSwitchAccountsModalLegacy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(){var a=i(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("PolarisSwitchAccountsModalLegacy.react"),{}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("IGDShell.react",["BaseTheme.react","CometPlaceholder.react","IGDSBox.react","IGDThemeConfig","PolarisBaseShell.react","PolarisCallGatingHelpers","PolarisConfig","PolarisReactRedux.react","PolarisSwitchAccountsModal.react","PolarisToastWrapper.react","VideoPlayerGlobalComponents.react","cr:4692","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("PolarisIncomingCall.react").__setRef("IGDShell.react")),k=c("deferredLoadComponent")(c("requireDeferred")("PolarisDirectVerifiedUserCallingNotEnabledModal.react").__setRef("IGDShell.react")),l=c("deferredLoadComponent")(c("requireDeferred")("PolarisDirectVerifiedUserCallingNotFollowingModal.react").__setRef("IGDShell.react")),m={root:{height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){a=a.children;var e=d("PolarisReactRedux.react").useSelector(function(a){return a.navigation.isAccountSwitcherOpen}),f=d("PolarisReactRedux.react").useSelector(function(a){return a.direct.verifiedUserCalling}),g=f.notEnabledModalOpen;f=f.notFollowingModalOpen;return i.jsx(c("VideoPlayerGlobalComponents.react"),{children:i.jsx(c("PolarisBaseShell.react"),{xstyle:m.root,children:i.jsxs(c("BaseTheme.react"),{config:c("IGDThemeConfig"),children:[i.jsxs("div",{className:"xnz67gz x1iyjqo2 x5yr21d xmz0i5r xlnp5zw",children:[g&&i.jsx(k,{}),f&&i.jsx(l,{}),i.jsxs(c("IGDSBox.react"),{height:"100vh",position:"relative",width:"100%",children:[b("cr:4692")!=null?i.jsxs(b("cr:4692"),{children:[i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&i.jsx(j,{})}),a]}):i.jsxs(i.Fragment,{children:[i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&i.jsx(j,{})}),a]}),i.jsx("div",{children:i.jsx(c("PolarisToastWrapper.react"),{})})]})]}),e&&d("PolarisConfig").isLoggedIn()&&i.jsx("div",{children:i.jsx(c("PolarisSwitchAccountsModal.react"),{})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWQPLLogger",["QPLUserFlow","Random","cr:10049"],(function(a,b,c,d,e,f,g){"use strict";b("cr:10049")==null?void 0:b("cr:10049").overwriteSamplingRate();function a(a){return{addQPLAnnotations:function(b,d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},markQPLCancel:function(b){c("QPLUserFlow").endCancel(a,{instanceKey:b})},markQPLFailure:function(b,d){var e;c("QPLUserFlow").endFailure(a,(e=d==null?void 0:d.name)!=null?e:"fail",{error:d,instanceKey:b})},markQPLFailureWithMsg:function(b,d){c("QPLUserFlow").endFailure(a,d,{instanceKey:b})},markQPLPoint:function(b,d,e){c("QPLUserFlow").addPoint(a,d,{debugInfo:e,instanceKey:b})},markQPLStart:function(){var b=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(a,{instanceKey:b});return b},markQPLSuccess:function(b){c("QPLUserFlow").endSuccess(a,{instanceKey:b})}}}g["default"]=a}),98);
__d("MAWDataSourceLogger",["I64","MAWQPLLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){i==null&&(i=c("MAWQPLLogger")(c("qpl")._(25303796,"1974")));return i}function a(a){var b=j().markQPLStart();j().addQPLAnnotations(b,{string:{threadType:(h||(h=d("I64"))).to_string(a)}});return b}function b(a,b,c){j().markQPLPoint(a,"wait_act_thread_start","before fetching messages range from table"),j().addQPLAnnotations(a,{"int":{version:1},string:{direction:b,thread_id:(h||(h=d("I64"))).to_string(c)}})}function e(a,b){j().markQPLFailureWithMsg(a,b)}function f(a){j().markQPLCancel(a)}function k(a){j().markQPLPoint(a,"wait_act_thread_end","before fetching messages range from table"),j().markQPLPoint(a,"load_more_msgs_start","load more messages from MAW DB")}function l(a,b){j().markQPLPoint(a,"load_more_msgs_end","Note: OLD SOLUTION DOES NOT FETCH messages. they are fetched in afterTransaction that we cannot control"),j().addQPLAnnotations(a,{bool:{hasMoreBefore:b}})}function m(a){j().markQPLSuccess(a)}function n(a,b){j().markQPLPoint(a,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+b)}function o(a,b){j().markQPLFailure(a,b)}g.logLoadMoreMsgsStart=a;g.logLoadMoreMsgsThreadWaiting=b;g.logLoadMoreMsgsFailure=e;g.logLoadMoreMsgsCancel=f;g.logLoadMoreMsgsThreadReadyFetchMsgs=k;g.logLoadMoreMsgsFetched=l;g.logLoadMoreMsgsSuccess=m;g.logLoadMoreMsgsRangeQuery=n;g.logLoadMoreMsgsRuntimeError=o}),98);
__d("MAWFetchSecureMessages",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWMiActOnActThreadReady","ReQL","WATagsLogger","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWFetchSecureMessages: threadJid: "," minMsgSortOrderTsResponse ",""]);i=function(){return a};return a}var j=c("requireDeferred")("MWRestoreMessagesFromEB").__setRef("MAWFetchSecureMessages"),k=10;function a(a,b,c,d,e,f,g){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,l){g===void 0&&(g=k);var m=l.addQPLAnnotations,n=l.markQPLFailure,o=l.markQPLPoint,p=l.markQPLStart;l=l.markQPLSuccess;var q=p();m(q,{string:{threadType:(h||(h=d("I64"))).to_string(e)}});function r(a){o(q,"load_more_msgs_success","successfully loaded messages from worker"),m(q,a)}o(q,"before_start_load_more_msgs","before fetching messages range from table");m(q,{string:babelHelpers["extends"]({direction:f,thread_id:h.to_string(c)},e!=null?{thread_type:(h||(h=d("I64"))).to_string(e)}:{})});p=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(c)));try{if(p!=null&&!p.isLoadingBefore&&f==="before"){o(q,"start_load_more_msgs","starting the load more QPL event");e=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,c,"MAWFetchMoreMessages"));var s=e.chatJid;o(q,"put_message_range","put txn in messages_ranges_v2__generated table");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:p.isLoadingAfter,isLoadingBefore:!0,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});o(q,"send_loadMoreMsgs_to_backend","calling backend with loadMoreMsgs");c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:s,direction:f,numMsgs:g,offsetMsgId:d("MAWDbMsg").toMsgId(p.minMessageId)}));r({bool:{hasMoreBefore:c.hasMoreBefore}});if(c.hasMoreBefore){l(q);return}var t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{chatJid:s,mayBeAdminMsgId:d("MAWDbMsg").toMsgId(p.minMessageId)}));d("WATagsLogger").TAGS(["labyrinth_web","MAWFetchSecureMessages"]).LOG(i(),s,t.minMsgTimestampMs);o(q,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t.minMsgTimestampMs);l(q);j.onReady(function(b){b({chatJid:s,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_int32(g),sortOrderMs:h.of_float(t.minMsgTimestampMs),storage:a})})}m(q,{bool:{isLoadingAfter:p==null?void 0:p.isLoadingAfter,isLoadingBefore:p==null?void 0:p.isLoadingBefore}});o(q,"already_loading_messages","end the load more QPL event.");l(q)}catch(a){n(q,a)}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("MAWIsEBEnabled",["I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEncryptedBackupUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("gkx")("23914"))return!1;a=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(a.tables));return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))});return j.apply(this,arguments)}g.isEbEnabled=a}),98);
__d("MAWPutMessagesToDB",["MAWBridgeDeleteReactionHandler","MAWBridgeMsgsStartCountdownHandler","MAWBridgeNewMediaHandler","MAWBridgeNewMsgHandler","MAWBridgeNewReceiverFetchInfoHandler","MAWBridgeNewXMAHandler","MAWBridgeReactionUpsertHandler","MAWGetIsMediaDownloadStatusEnabled","Promise","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=e.expiringCountdown,i=e.medias,j=e.msgs,k=e.reactions,l=e.receiverFetchInfoPayloads;e=e.xmas;yield d("MAWBridgeNewMsgHandler").bulkCall(a,j);c("justknobx")._("3004")&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadSetStatusEnabled()&&f({tag:"NewMedias",value:i});yield (h||(h=b("Promise"))).all(i.map(function(b){return d("MAWBridgeNewMediaHandler").call(a,b)}));yield h.all(e.map(function(b){return d("MAWBridgeNewXMAHandler").call(a,b)}));yield h.all(l.map(function(b){return d("MAWBridgeNewReceiverFetchInfoHandler").call(a,b)}));yield d("MAWBridgeMsgsStartCountdownHandler").call(a,{msgs:g});yield h.all(k.map(function(b){return b.type==="delete"?d("MAWBridgeDeleteReactionHandler").call(a,b.reaction):d("MAWBridgeReactionUpsertHandler").call(a,b.reaction)}))});return j.apply(this,arguments)}function a(a,b,c){return a.runInTransaction(function(a){return i(a,b,c)},"readwrite","ui",void 0,f.id+":80")}function e(a,b,c){return a.runInTransaction(function(a){return i(a,babelHelpers["extends"]({},b,{expiringCountdown:[],hasMoreAfter:!1,hasMoreBefore:!1}),c)},"readwrite","ui",void 0,f.id+":98")}g.insertMessageResponseToDBInExistingTransaction=i;g.insertMessageResponseIntoDatabase=a;g.insertMessageResponseIntoDatabaseByExternalId=e}),98);
__d("MAWSecureDataSource",[],(function(a,b,c,d,e,f){"use strict";a=10;f.DEFAULT_NUM_MESSAGES=a}),66);
__d("MAWSecureLocalDBFetch",["CometLruCache","I64","MAWBridgeSendAndReceive","MAWDbMsg","asyncToGeneratorRuntime","deepEquals"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CometLruCache").create(20,2e3);function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.actionType,e=a.chatJid,f=a.config,g=a.count,j=a.direction,k=a.offsetMsg;a=a.timestampMs;var l=i.get(e);if(l!=null){var m=l&&l.options,n=m.count;m=babelHelpers.objectWithoutPropertiesLoose(m,["count"]);if(c("deepEquals")(m,{config:f,direction:j,offsetMsg:k,timestampMs:a})&&g<=n)return l.result}n=babelHelpers["extends"]({},yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","maw_load_msgs",{actionType:b,chatJid:e,config:f,direction:j,includeOriginalMsg:(m=k==null?void 0:k.includeOriginalMsg)!=null?m:!1,msgId:(k==null?void 0:k.messageId)==null?null:d("MAWDbMsg").toMsgId(k.messageId),numMsgs:g,sortOrderMs:a!=null?(h||(h=d("I64"))).to_float(a):null}));i.set(e,{options:{config:f,count:g,direction:j,offsetMsg:k,timestampMs:a},result:n});return n});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MLV2DataSourceLogger",["I64","MAWQPLLogger","nullthrows","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){i==null&&(i=c("MAWQPLLogger")(c("qpl")._(25303796,"1974")));return i}var k=new Map();function l(a,b){return(h||(h=d("I64"))).to_string(a)+b}function a(a,b,e,f){var g=l(a,b);if(k.has(g))return c("nullthrows")(k.get(g));var i=j().markQPLStart(),m=new Set(),o={addQPLAnnotations:function(a){j().addQPLAnnotations(i,a)},annotateMessageRangesDataSource:function(a){m.add(a),j().addQPLAnnotations(i,{string_array:{message_ranges_source:Array.from(m.keys())}})},markQPLCancel:function(){j().markQPLCancel(i),k["delete"](g)},markQPLFailure:function(a){j().markQPLFailure(i,a),k["delete"](g)},markQPLFailureWithMsg:function(a){j().markQPLFailureWithMsg(i,a),k["delete"](g)},markQPLPoint:function(a){j().markQPLPoint(i,a)},markQPLSuccess:function(){j().markQPLSuccess(i),k["delete"](g)}};o.addQPLAnnotations({string:{thread_type:(h||(h=d("I64"))).to_string(f)}});k.set(g,o);n(b,e,a);return o}function m(a,b){a=l(a,b);return k.get(a)}function n(a,b,c){var e;(e=m(c,a))==null?void 0:e.addQPLAnnotations({"int":{queried_count:b},string:{direction:a,thread_id:(h||(h=d("I64"))).to_string(c)}})}g.startMLV2LoggerForThread=a;g.getMLV2LoggerForThread=m}),98);
__d("MAWSecureLocalDBDataSource",["I64","MAWBridgeSendAndReceive","MAWDataSourceLogger","MAWDbMsg","MAWIsEBEnabled","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureDataSource","MAWSecureLocalDBFetch","MLV2DataSourceLogger","MWEncryptedBackUpEBNotEnabledError","Promise","ReQL","WAResultOrError","WAStanzaUtils","WATagsLogger","asyncToGeneratorRuntime","gkx","justknobx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fetching "," messages by external id, which is not optimal.\n      Consider migrating 'loadMsgsByExternalId' backend request to a batch version "]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to fetch messages: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["useFetchSecureMessages: threadJid: "," minMsgSortOrderTsResponse ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Fetch more: ",""]);m=function(){return a};return a}var n=c("requireDeferred")("MAWEBFetch").__setRef("MAWSecureLocalDBDataSource"),o=d("WATagsLogger").TAGS(["MAWSecureLocalDBDataSource"]);function p(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var h=(yield d("MAWIsEBEnabled").isEbEnabled(a));return!h?(i||(i=b("Promise"))).resolve(d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)):(i||(i=b("Promise"))).race([n.load().then(function(b){return b({chatJid:e,count:g,db:a,direction:"before",timestampMs:f})}),new i(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError("timeout"))},c("justknobx")._("2569"))})])});return q.apply(this,arguments)}function r(a){return a.msgs.map(function(a){return{externalId:a.externalId,msgType:a.type_,sortOrderMs:a.sortOrderMs}})}a=function(){function a(){this.$1=!1}var e=a.prototype;e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,i,j,k,q,r,s){if(j==="after")return;j;o.LOG(m(),e);d("MAWDataSourceLogger").logLoadMoreMsgsThreadWaiting(q,"before",e);j=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,e,"MAWFetchMoreMessages"));j=j.chatJid;d("MAWDataSourceLogger").logLoadMoreMsgsThreadReadyFetchMsgs(q);var t=c("gkx")("1560");if(!this.$1&&t){var u=(yield p(a,j,g,k));u.success===!1&&u.error==="timeout"&&(this.$1=!0)}var v=(yield c("MAWSecureLocalDBFetch")({actionType:r,chatJid:j,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:k,direction:"before",offsetMsg:{includeOriginalMsg:!1,messageId:i.minMessageId},timestampMs:g})),w=v.msgs.length>0?v.msgs[v.msgs.length-1].msgId:i.minMessageId;yield a.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c;yield d("MAWPutMessagesToDB").insertMessageResponseToDBInExistingTransaction(b,v,s);c=(yield (c=b.messages_ranges_v2__generated).get.apply(c,[i.threadKey,i.minTimestampMs,i.minMessageId]));if(c==null)return;var e=v.hasMoreBefore;v.hasMoreBefore===!1&&!t&&(yield d("MAWIsEBEnabled").isEbEnabled(a))&&(e=!0);yield b.messages_ranges_v2__generated.upsert([c.threadKey,c.minTimestampMs,c.minMessageId],{hasMoreAfter:!1,hasMoreBefore:e,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:c.maxMessageId,maxTimestampMs:c.maxTimestampMs,minMessageId:w,minTimestampMs:(h||(h=d("I64"))).zero,threadKey:i.threadKey})});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":180");d("MAWDataSourceLogger").logLoadMoreMsgsFetched(q,v.hasMoreBefore);if(v.hasMoreBefore){d("MAWDataSourceLogger").logLoadMoreMsgsSuccess(q);return}u=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{chatJid:j,mayBeAdminMsgId:d("MAWDbMsg").toMsgId(i.minMessageId)}));d("WATagsLogger").TAGS(["labyrinth_web","useFetchSecureMessages"]).LOG(l(),j,u.minMsgTimestampMs);d("MAWDataSourceLogger").logLoadMoreMsgsRangeQuery(q,u.minMsgTimestampMs);r=(yield n.load());g=(yield r({chatJid:j,count:k,db:a,direction:"before",timestampMs:(h||(h=d("I64"))).of_float(u.minMsgTimestampMs)}));g.success&&g.value.hasMoreBefore===!1&&(yield a.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=i.minTimestampMs,f=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.messages_ranges_v2__generated).getKeyRange(e).bounds({lte:[c]}).filter(function(a){var b=a.maxTimestampMs;a=a.minTimestampMs;return(h||(h=d("I64"))).ge(c,a)&&(h||(h=d("I64"))).le(c,b)})));if(f==null)return;yield b.messages_ranges_v2__generated.upsert([f.threadKey,f.minTimestampMs,f.minMessageId],babelHelpers["extends"]({},f,{hasMoreBefore:!1,isLoadingBefore:!1}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":262"));d("MAWDataSourceLogger").logLoadMoreMsgsSuccess(q)});function e(b,c,d,e,f,g,h,i,j){return a.apply(this,arguments)}return e}();e.requestMessages=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j){j=(yield c("MAWSecureLocalDBFetch")({actionType:j,chatJid:b,config:i,count:(a=h)!=null?a:d("MAWSecureDataSource").DEFAULT_NUM_MESSAGES,direction:g,offsetMsg:f==null?null:{includeOriginalMsg:!1,messageId:f},timestampMs:e}));b=j.msgs.map(function(a){return{externalId:a.externalId,msgType:a.type_,sortOrderMs:a.sortOrderMs}});return{hasMoreAfter:j.hasMoreAfter,hasMoreBefore:j.hasMoreBefore,msgs:b}});function e(b,c,d,e,f,g,h,i){return a.apply(this,arguments)}return e}();e.fetchSecureMessagesProtocol=function(a,b,c,e,f,g,h,i,j){h===void 0&&(h=d("MAWSecureDataSource").DEFAULT_NUM_MESSAGES);c=d("MAWDataSourceLogger").logLoadMoreMsgsStart(c);return this.$2(a,b,e,f,g,h,c,i,j)["catch"](function(a){var c;o.ERROR(k(),a);(c=d("MLV2DataSourceLogger").getMLV2LoggerForThread(b,g))==null?void 0:c.markQPLFailure(a)})};e.fetchMessagesByExternalId=function(a,c){a.length>2&&o.WARN(j(),a.length);a=a.map(function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMsgsByExternalId",{config:c,externalId:d("WAStanzaUtils").toStanzaId(a)})});return(i||(i=b("Promise"))).all(a).then(function(a){return a.map(function(a){return r(a)}).flat()})};return a}();g["default"]=a}),98);
__d("useMAWQPLLogger",["MAWQPLLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){return i(function(){return c("MAWQPLLogger")(a)},[a])}g.useMAWQPLLogger=a}),98);
__d("MAWFetchMoreMessages",["Int64Hooks","MAWFetchSecureMessages","MAWSecureLocalDBDataSource","qpl","useMAWQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("Int64Hooks").useMemoInt64(function(){return new(c("MAWSecureLocalDBDataSource"))()},[])}function b(a){var b=(h||(h=c("useReStore")))(),e=d("useMAWQPLLogger").useMAWQPLLogger(c("qpl")._(25303796,"1974"));return d("Int64Hooks").useCallbackInt64(function(d,f,g,h){return c("MAWFetchSecureMessages")(b,d,f,a,g,h,e)},[b,e,a])}g.useSecureDataStorage=a;g.useFetchSecureMessages=b}),98);
__d("PolarisDirectInbox.react",["IGDInboxContextProviders.react","IGDInboxLeftRail.react","IGDInboxRoot.react","IGDMessageRequestLeftRail.react","IGDPageSetup.react","IGDPartnershipInboxLeftRail.react","IGDShell.react","PolarisDirectInboxMetaManager.react","PolarisDirectStrings","react","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(10),e=a.inboxTrayEntrypoint;a=a.placeholder;var f=c("useRoutePassthroughProps")(),g;bb0:switch(f==null?void 0:f.entryPoint){case"pendingRequests":case"inboxSpam":b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDMessageRequestLeftRail.react"),{}),b[0]=f):f=b[0];g=f;break bb0;case"partnershipInbox":b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDPartnershipInboxLeftRail.react"),{}),b[1]=f):f=b[1];g=f;break bb0;default:b[2]!==e?(f=j.jsx(c("IGDInboxLeftRail.react"),{inboxTrayEntrypoint:e,inboxTrayEntrypointMobile:null}),b[2]=e,b[3]=f):f=b[3];g=f}e=g;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("PolarisDirectInboxMetaManager.react"),{id:"DirectThreadPage",title:d("PolarisDirectStrings").INBOX_STRING}),b[4]=f):f=b[4];b[5]!==e?(f=j.jsxs(d("IGDInboxContextProviders.react").IGDInboxContextProviders,{children:[f,j.jsx(c("IGDInboxRoot.react"),{leftRail:e})]}),b[5]=e,b[6]=f):f=b[6];b[7]!==a||b[8]!==f?(e=j.jsx(c("IGDShell.react"),{children:j.jsx(c("IGDPageSetup.react"),{placeholder:a,threadDisplayType:"Inbox",children:f})}),b[7]=a,b[8]=f,b[9]=e):e=b[9];return e}g["default"]=a}),98);