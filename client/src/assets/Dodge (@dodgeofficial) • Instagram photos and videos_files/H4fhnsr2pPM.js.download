;/*FB_PKG_DELIM*/

__d("PolarisClipsDesktopCommentsPopoverQuery.graphql",["PolarisClipsDesktopCommentsPopoverQuery_instagramRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"media_id"}],c=[{kind:"Variable",name:"id",variableName:"media_id"}],d={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"comment_count",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisClipsDesktopCommentsPopoverQuery",selections:[{kind:"RequiredField",field:{alias:null,args:c,concreteType:"XDTMediaDict",kind:"LinkedField",name:"fetch__XDTMediaDict",plural:!1,selections:[{kind:"RequiredField",field:d,action:"THROW",path:"fetch__XDTMediaDict.pk"},e,f,g,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"owner",plural:!1,selections:[{kind:"RequiredField",field:d,action:"THROW",path:"fetch__XDTMediaDict.owner.pk"}],storageKey:null},action:"THROW",path:"fetch__XDTMediaDict.owner"},{args:null,kind:"FragmentSpread",name:"PolarisPostCommentsContainer_media"}],storageKey:null},action:"THROW",path:"fetch__XDTMediaDict"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisClipsDesktopCommentsPopoverQuery",selections:[{alias:null,args:c,concreteType:"XDTMediaDict",kind:"LinkedField",name:"fetch__XDTMediaDict",plural:!1,selections:[d,e,f,g,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"owner",plural:!1,selections:[d,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},h],storageKey:null}]},params:{id:b("PolarisClipsDesktopCommentsPopoverQuery_instagramRelayOperation"),metadata:{is_distillery:!0},name:"PolarisClipsDesktopCommentsPopoverQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("PolarisLexicalCommentInputStyles",[],(function(a,b,c,d,e,f,g){"use strict";a={avatarContainer:{paddingStart:"x1e558r4",$$css:!0},avatarContainerMobile:{paddingEnd:"x1sxyh0",paddingStart:"xkhd6sd",$$css:!0},commentInputBorderColor:{borderTopColor:"x1qkvvx7",borderEndColor:"x16fb8lf",borderBottomColor:"x1ufvan5",borderStartColor:"x1afoz4w",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",maxHeight:"x1vke2v8",overflowX:"x6ikm8r",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0},contenteditable:{color:"x5n08af",width:"xh8yej3",wordBreak:"x13faqbe",$$css:!0},contenteditableCommon:{fontSize:"xl565be",lineHeight:"x5dp1im",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",width:"xh8yej3",$$css:!0},controlsContainer:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",flexDirection:"x1q0g3np",flexShrink:"x2lah0s",fontSize:"xk390pu",justifyContent:"x1qughib",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",verticalAlign:"x11njtxf",$$css:!0},outerContainer:{alignItems:"x6s0dn4",backgroundColor:"xnz67gz",borderTopColor:"xl4qmuc",borderEndColor:"xxqof28",borderBottomColor:"xd18jyu",borderStartColor:"xiuebna",borderTopStartRadius:"x13jg5ln",borderTopEndRadius:"x12klpvz",borderBottomEndRadius:"xstbrti",borderBottomStartRadius:"x12bmzex",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxSizing:"x9f619",display:"x78zum5",minHeight:"x1ba4aug",outline:"x1a2a7pz",position:"x1n2onr6",width:"xh8yej3",$$css:!0},outerContainerMobile:{borderTopColor:"x1yvgwvq",borderEndColor:"x1dqoszc",borderBottomColor:"x1ixjvfu",borderStartColor:"xhk4uv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"xu0aao5",$$css:!0},outerContainerMobileWithReplyingToBar:{borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",minHeight:"x4lt0of",paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,paddingEnd:"xg83lxy",paddingTop:"x1nn3v0j",$$css:!0},paragraph:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},placeholder:{marginTop:"xr9ek0c",outline:"x1a2a7pz",pointerEvents:"x47corl",position:"x10l6tqk",$$css:!0},replyingToBarContainer:{width:"xgqk73l",$$css:!0}};g["default"]=a}),98);
__d("PolarisLexicalCommentInputPlaceholder.react",["IGDSBox.react","PolarisEmojiButton.react","PolarisGenericStrings","PolarisLexicalCommentInputStyles","PolarisUA","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useState,l=b.c,m={editor:{backgroundColor:"xjbqb8w",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",tabSize:"x1hnll1o","::placeholder_color":"xs3hnx8","::placeholder_fontSize":"x1db89rt","::placeholder_marginBottom":"xyfr5zc","::placeholder_opacity":"x7xwk5j",":focus-visible_outline":"xpqswwc",$$css:!0},editorWrapper:{height:"x1fgtraw",maxHeight:"xz75wtk",$$css:!0}};function n(a){var b=l(9),e=a.initialCommentText,f=a.setInitialCommentText,g=a.setIsInteracted;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=(h||(h=c("stylex")))(m.editor,c("PolarisLexicalCommentInputStyles").contenteditableCommon,c("PolarisLexicalCommentInputStyles").contenteditable),b[0]=a):a=b[0];var i;b[1]!==f?(i=function(a){f(a.target.value)},b[1]=f,b[2]=i):i=b[2];var k;b[3]!==g?(k=function(){return g(!0)},b[3]=g,b[4]=k):k=b[4];b[5]!==i||b[6]!==k||b[7]!==e?(a=j.jsx("input",{className:a,onChange:i,onFocus:k,placeholder:d("PolarisGenericStrings").COMMENT_PLACEHOLDER_TEXT,suppressContentEditableWarning:!0,value:e}),b[5]=i,b[6]=k,b[7]=e,b[8]=a):a=b[8];return a}function a(a){var b=l(16),e=a.initialCommentText,f=a.setInitialCommentText,g=a.setIsInteracted;a=k(!1);var i=a[0],o=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=(h||(h=c("stylex")))([c("PolarisLexicalCommentInputStyles").container,m.editorWrapper]),b[0]=a):a=b[0];b[1]!==e||b[2]!==f||b[3]!==g?(a=j.jsx("div",{className:a,children:j.jsx(n,{initialCommentText:e,setInitialCommentText:f,setIsInteracted:g})}),b[1]=e,b[2]=f,b[3]=g,b[4]=a):a=b[4];var p;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p=(h||(h=c("stylex")))(c("PolarisLexicalCommentInputStyles").controlsContainer),b[5]=p):p=b[5];var q;b[6]!==g||b[7]!==f||b[8]!==e||b[9]!==i?(q=!d("PolarisUA").isMobile()&&j.jsx("div",{className:"x1e558r4",onFocus:function(){return g(!0)},children:j.jsx(c("PolarisEmojiButton.react"),{color:"ig-secondary-text",isEmojiTrayOpen:i,onEmojiClick:function(a){g(!0),f(e+a),o(!1)},setEmojiTrayOpen:o})}),b[6]=g,b[7]=f,b[8]=e,b[9]=i,b[10]=q):q=b[10];b[11]!==q?(i=j.jsx("div",{className:p,children:j.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",flex:"grow",paddingX:2,paddingY:1,position:"relative",children:q})}),b[11]=q,b[12]=i):i=b[12];b[13]!==a||b[14]!==i?(p=j.jsxs(j.Fragment,{children:[a,i]}),b[13]=a,b[14]=i,b[15]=p):p=b[15];return p}g["default"]=a}),98);
__d("usePolarisLexicalCommentInputState",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext,k=c.c;e={analyticsContext:"reelsTab",clearCurrentReply:function(){},isSidecar:!1,isVideo:!1,ownerId:"",postId:"",viewerId:"",viewerProfilePicture:null};var l=i.createContext(e);function a(a){var b=k(3),c=a.children;a=a.value;var d;b[0]!==a||b[1]!==c?(d=i.jsx(l.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=d):d=b[2];return d}function b(){return j(l)}g.PolarisLexicalCommentInputStateProvider=a;g.usePolarisLexicalCommentInputState=b}),98);
__d("PolarisLexicalCommentInputLoader.react",["CometPlaceholder.react","PolarisLexicalCommentInputPlaceholder.react","react","requireDeferred","useDeferredModuleOnReady","usePolarisLexicalCommentInputState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=b.c,m=c("requireDeferred")("PolarisLexicalCommentInput.react").__setRef("PolarisLexicalCommentInputLoader.react");function a(){var a=l(8),b=k(!1),e=b[0],f=b[1];b=k("");var g=b[0];b=b[1];var h=d("usePolarisLexicalCommentInputState").usePolarisLexicalCommentInputState(),n=h.repliedToUsername,o;a[0]!==n?(h=function(){n!=null&&f(!0)},o=[n],a[0]=n,a[1]=h,a[2]=o):(h=a[1],o=a[2]);j(h,o);h=c("useDeferredModuleOnReady")(m);if(e&&h!=null){a[3]!==h||a[4]!==g?(o=i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(h,{initialCommentText:g})}),a[3]=h,a[4]=g,a[5]=o):o=a[5];return o}a[6]!==g?(e=i.jsx(c("PolarisLexicalCommentInputPlaceholder.react"),{initialCommentText:g,setInitialCommentText:b,setIsInteracted:f}),a[6]=g,a[7]=e):e=a[7];return e}g["default"]=a}),98);
__d("PolarisImmersiveMediaViewerLayoutContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext(null);function k(){return i(j)}function a(){var a=k();a=(a==null?void 0:a.state.isSidePanelOpen)===!0;return!a}g.usePolarisImmersiveMediaViewerLayout=k;g.usePolarisIsImmersiveViewerFullScreen=a}),98);
__d("PolarisLexicalCommentInputWrapper.react",["IGDSAvatar.react","IGDSBox.react","PolarisImmersiveMediaViewerLayoutContext.react","PolarisLexicalCommentInputStyles","PolarisPostCommentInputReplyingToBar.react","PolarisUA","react","stylex","usePolarisLexicalCommentInputState"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(25);a=a.children;var e=d("PolarisImmersiveMediaViewerLayoutContext.react").usePolarisImmersiveMediaViewerLayout();e=(e==null?void 0:e.state.showCommentInputBorder)===!0;var f=d("usePolarisLexicalCommentInputState").usePolarisLexicalCommentInputState(),g=f.clearCurrentReply,i=f.repliedToUsername;f=f.viewerProfilePicture;var l;b[0]!==f?(l=f!=null&&k.jsx("div",{className:(h||(h=c("stylex")))([c("PolarisLexicalCommentInputStyles").avatarContainer,d("PolarisUA").isMobile()&&c("PolarisLexicalCommentInputStyles").avatarContainerMobile]),children:k.jsx(c("IGDSAvatar.react"),{alt:"",size:"small",src:f})}),b[0]=f,b[1]=l):l=b[1];f=l;b[2]!==f?(l=d("PolarisUA").isMobile()&&f,b[2]=f,b[3]=l):l=b[3];e=e&&c("PolarisLexicalCommentInputStyles").commentInputBorderColor;var m;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=d("PolarisUA").isMobile()&&c("PolarisLexicalCommentInputStyles").outerContainerMobile,b[4]=m):m=b[4];var n;b[5]!==i?(n=d("PolarisUA").isMobile()&&i!=null&&c("PolarisLexicalCommentInputStyles").outerContainerMobileWithReplyingToBar,b[5]=i,b[6]=n):n=b[6];b[7]!==e||b[8]!==n?(m=[c("PolarisLexicalCommentInputStyles").outerContainer,e,m,n],b[7]=e,b[8]=n,b[9]=m):m=b[9];b[10]!==i||b[11]!==g?(e=d("PolarisUA").isMobile()&&i!=null&&k.jsx("div",{className:(h||(h=c("stylex")))(c("PolarisLexicalCommentInputStyles").replyingToBarContainer),children:k.jsx(c("PolarisPostCommentInputReplyingToBar.react"),{isRevampedMobileInput:!0,onClearReply:g,username:i})}),b[10]=i,b[11]=g,b[12]=e):e=b[12];b[13]!==f?(n=d("PolarisUA").isDesktop()&&f,b[13]=f,b[14]=n):n=b[14];b[15]!==n||b[16]!==a?(i=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",width:"100%",children:[n,a]}),b[15]=n,b[16]=a,b[17]=i):i=b[17];b[18]!==m||b[19]!==e||b[20]!==i?(g=k.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",position:"relative",xstyle:m,children:[e,i]}),b[18]=m,b[19]=e,b[20]=i,b[21]=g):g=b[21];b[22]!==l||b[23]!==g?(f=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",width:"100%",children:[l,g]}),b[22]=l,b[23]=g,b[24]=f):f=b[24];return f}g["default"]=a}),98);
__d("PolarisLexicalPostCommentInput.react",["PolarisLexicalCommentInputLoader.react","PolarisLexicalCommentInputWrapper.react","PolarisPendingCommentActions","PolarisPostDetailsSectionProvider.react","PolarisReactRedux.react","react","usePolarisLexicalCommentInputState","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(22),e=a.adInfo,f=a.isSidecar,g=a.isVideo,h=a.ownerId,k=a.postId,l=a.viewerId;a=a.viewerProfilePicture;var m=d("PolarisPostDetailsSectionProvider.react").usePolarisPostDetailsSectionProvider(),n;b[0]!==k?(n=function(a){return(a=a.pendingComments[k])!=null?a:{}},b[0]=k,b[1]=n):n=b[1];n=c("usePolarisSelector")(n);var o=n.repliedToCommentAuthorId,p=n.repliedToCommentId,q=n.repliedToCommentParentId;n=n.repliedToUsername;var r=d("PolarisReactRedux.react").useDispatch(),s;b[2]!==r||b[3]!==k?(s=function(){r(d("PolarisPendingCommentActions").clearPendingComment(k))},b[2]=r,b[3]=k,b[4]=s):s=b[4];s=s;var t;b[5]!==e||b[6]!==m||b[7]!==s||b[8]!==f||b[9]!==g||b[10]!==h||b[11]!==k||b[12]!==o||b[13]!==p||b[14]!==q||b[15]!==n||b[16]!==l||b[17]!==a?(t={adInfo:e,analyticsContext:m,clearCurrentReply:s,isSidecar:f,isVideo:g,ownerId:h,postId:k,repliedToCommentAuthorId:o,repliedToCommentId:p,repliedToCommentParentId:q,repliedToUsername:n,viewerId:l,viewerProfilePicture:a},b[5]=e,b[6]=m,b[7]=s,b[8]=f,b[9]=g,b[10]=h,b[11]=k,b[12]=o,b[13]=p,b[14]=q,b[15]=n,b[16]=l,b[17]=a,b[18]=t):t=b[18];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("PolarisLexicalCommentInputWrapper.react"),{children:j.jsx(c("PolarisLexicalCommentInputLoader.react"),{})}),b[19]=e):e=b[19];b[20]!==t?(m=j.jsx(d("usePolarisLexicalCommentInputState").PolarisLexicalCommentInputStateProvider,{value:t,children:e}),b[20]=t,b[21]=m):m=b[21];return m}g["default"]=a}),98);
__d("usePolarisClipsDesktopPopoverCloseOnScroll",["PolarisClipsTabDesktopContainerElementProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.c;function a(a){var b=j(4),c=d("PolarisClipsTabDesktopContainerElementProvider.react").usePolarisClipsTabDesktopContainerElementProvider(),e=c.element,f;b[0]!==e||b[1]!==a?(c=function(){e==null?void 0:e.addEventListener("scroll",a);return function(){e==null?void 0:e.removeEventListener("scroll",a)}},f=[e,a],b[0]=e,b[1]=a,b[2]=c,b[3]=f):(c=b[2],f=b[3]);i(c,f)}g["default"]=a}),98);
__d("PolarisClipsDesktopCommentsPopover.react",["CometPlaceholder.react","CometRelay","IGDSBox.react","IGDSPopover.react","IGDSText.react","PolarisClipsDesktopCommentsContainerPopoverPlaceholder.react","PolarisClipsDesktopCommentsPopoverQuery.graphql","PolarisClipsDesktopPopoverHeader.react","PolarisClipsTabHelpers","PolarisGenericStrings","PolarisLexicalPostCommentInput.react","PolarisMediaConstants","PolarisPendingCommentActions","PolarisPostCommentInputReplyingToBar.react","PolarisPostCommentsContainer.react","PolarisPostDetailsSectionProvider.react","PolarisReactRedux.react","cr:1342","react","usePolarisClipsDesktopPopoverCloseOnScroll","usePolarisSelector","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useRef,m=e.c,n=343,o={arrowContainer:{marginBottom:"x1yztbdb",$$css:!0},commentContainer:{width:"xh8yej3",$$css:!0}};function p(a){var b=m(3);a=a.containerHeight;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=[],b[0]=d):d=b[0];k(q,d);b[1]!==a?(d=j.jsx(c("PolarisClipsDesktopCommentsContainerPopoverPlaceholder.react"),{containerHeight:a}),b[1]=a,b[2]=d):d=b[2];return d}function q(){return function(){window.dispatchEvent(new Event("resize"))}}var r=h!==void 0?h:h=b("PolarisClipsDesktopCommentsPopoverQuery.graphql");function a(a){var e=a.props,f=e.anchorRef;e=e.onClose;a=a.queries;var g=a.commentsQuery;a=a.mediaQuery;a=d("CometRelay").usePreloadedQuery(r,a);a=a.fetch__XDTMediaDict;var h=a.commenting_disabled_for_viewer,i=a.owner.pk,k=a.pk,m=a.product_type,q=c("usePolarisViewer")(),s=d("PolarisReactRedux.react").useDispatch(),t=c("usePolarisSelector")(function(a){return(a=a.pendingComments[k])==null?void 0:a.repliedToUsername}),u=function(){s(d("PolarisPendingCommentActions").clearPendingComment(k))};c("usePolarisClipsDesktopPopoverCloseOnScroll")(e);f=l(d("PolarisClipsTabHelpers").getMaxPopoverHeight(f==null?void 0:f.current));u=t!=null?j.jsx(c("IGDSBox.react"),{marginBottom:3,width:"100%",children:j.jsx(c("PolarisPostCommentInputReplyingToBar.react"),{onClearReply:u,username:t})}):null;h=h===!0?j.jsx(c("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:d("PolarisGenericStrings").COMMENTING_LIMITED}):j.jsxs(j.Fragment,{children:[u,j.jsx("div",{className:"x1iorvi4 xh8yej3",children:j.jsx(c("PolarisLexicalPostCommentInput.react"),{adInfo:null,isSidecar:!1,isVideo:m===d("PolarisMediaConstants").MediaTypes.VIDEO,ownerId:i,postId:k,viewerId:(t=q==null?void 0:q.id)!=null?t:"",viewerProfilePicture:q==null?void 0:q.profilePictureUrl})})]});return j.jsx(c("IGDSPopover.react"),{arrowContainerXStyle:o.arrowContainer,popoverContent:j.jsx(d("PolarisPostDetailsSectionProvider.react").PolarisPostDetailsSectionProvider,{value:"reelsTab",children:j.jsxs(c("IGDSBox.react"),{maxHeight:f.current,width:n,children:[j.jsx(c("PolarisClipsDesktopPopoverHeader.react"),{onClose:e,children:d("PolarisGenericStrings").COMMENTS_TEXT}),j.jsxs(c("IGDSBox.react"),{flex:"grow",minHeight:52,overflow:"auto",paddingX:8,children:[b("cr:1342")!=null&&j.jsx(c("IGDSBox.react"),{marginTop:2,children:j.jsx(b("cr:1342"),{commentsCount:a==null?void 0:a.comment_count})}),j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(p,{containerHeight:f.current}),children:j.jsx(c("PolarisPostCommentsContainer.react"),{adInfo:null,commentsQuery:g,media$key:a,xStyle:o.commentContainer})})]}),j.jsx(c("IGDSBox.react"),{alignItems:"center",bottom:!0,marginBottom:3,marginTop:3,paddingX:7,width:"100%",children:h})]})}),popoverName:"clips-comments",testid:void 0,withArrow:!0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisCommentSubmitMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7764883090241481"}),null);
__d("usePolarisCommentSubmitMutation.graphql",["usePolarisCommentSubmitMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"connections"},c={defaultValue:null,kind:"LocalArgument",name:"media_id"},d={defaultValue:null,kind:"LocalArgument",name:"request_data"},e=[{kind:"Variable",name:"media_id",variableName:"media_id"},{kind:"Variable",name:"request_data",variableName:"request_data"}],f={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"fbid_v2",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"usePolarisCommentSubmitMutation",selections:[{alias:null,args:e,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:f,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.created_at"},{kind:"RequiredField",field:g,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.pk"},{kind:"RequiredField",field:h,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.text"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[g,i,j,k,l,m],storageKey:null},action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.user"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c],kind:"Operation",name:"usePolarisCommentSubmitMutation",selections:[{alias:null,args:e,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[f,g,h,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[g,i,j,k,l,m,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,filters:null,handle:"prependNode",key:"",kind:"LinkedHandle",name:"node",handleArgs:[{kind:"Variable",name:"connections",variableName:"connections"},{kind:"Literal",name:"edgeTypeName",value:"XDTGetCommentsResponseEdge"}]}],storageKey:null}]},params:{id:b("usePolarisCommentSubmitMutation_instagramRelayOperation"),metadata:{is_distillery:!0},name:"usePolarisCommentSubmitMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("usePolarisCommentSubmit",["CometRelay","Lexical","LexicalComposerContext","PolarisAdsEngagementLogger","PolarisCommentsSortContext.react","PolarisDsaQEHelpers","PolarisEngagementLogger","PolarisGenericStrings","PolarisSortCommentsUtil","igMapTypenameToRelayID","polarisLogAction","react","usePolarisCommentSubmitMutation.graphql","usePolarisLexicalCommentInputState","usePolarisShowToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useContext,l=e.useEffect,m=e.useState,n=h!==void 0?h:h=b("usePolarisCommentSubmitMutation.graphql");function a(a){var b=m(""),e=b[0],f=b[1];b=k(d("PolarisCommentsSortContext.react").PolarisCommentsSortContext);var g=b.commentsSortOrder;b=d("LexicalComposerContext").useLexicalComposerContext();var h=b[0];l(function(){h.registerUpdateListener(function(a){a=a.editorState;a.read(function(){f(d("Lexical").$getRoot().getTextContent())})})},[h]);var i=d("usePolarisLexicalCommentInputState").usePolarisLexicalCommentInputState();b=d("CometRelay").useMutation(n);var o=b[0],p=c("usePolarisShowToast")(),q=j(function(){h.update(function(){d("Lexical").$getRoot().clear()})},[h]),r=j(function(){var b,f;a(!0);c("polarisLogAction")("comment",{source:i.analyticsContext});var h={adId:(b=(b=i.adInfo)==null?void 0:b.ad_id)!=null?b:"",adTrackingToken:(b=(b=i.adInfo)==null?void 0:b.tracking_token)!=null?b:""};b=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__connection",{data:{},media_id:i.postId,sort_order:g});f=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__parent_comment_id__child_comments__connection",{media_id:i.postId,parent_comment_id:(f=i.repliedToCommentParentId)!=null?f:i.repliedToCommentId});o({onCompleted:function(b){c("polarisLogAction")("commentSuccess",{});var e=1;i.isSidecar&&(e=8);i.isVideo&&(e=2);b={commentAuthorId:i.viewerId,commentId:b.xdt_web__comments__media_id__add_queryable.node.pk,containerModule:i.analyticsContext,mediaAuthorId:i.ownerId,mediaId:i.postId,mediaType:e,parentCommentAuthorId:i.repliedToCommentAuthorId,parentCommentId:i.repliedToCommentId};h.adId!=null&&h.adTrackingToken!=null?d("PolarisAdsEngagementLogger").logAdComment(b,h):d("PolarisEngagementLogger").logOrganicComment(b);q();i.clearCurrentReply();a(!1)},onError:function(){a(!1),p({actionHandler:function(){return r()},actionText:d("PolarisGenericStrings").COMMENT_CREATION_RETRY_TEXT,text:d("PolarisGenericStrings").COMMENT_CREATION_FAILURE_TEXT}),c("polarisLogAction")("commentFailure",{source:i.analyticsContext})},updater:function(a){if(d("PolarisDsaQEHelpers").hasNonProfiledExperienceEnabled())for(var b=d("PolarisSortCommentsUtil").commentsOptions,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(f>=b.length)break;h=b[f++]}else{f=b.next();if(f.done)break;h=f.value}h=h;if(h!==g){h=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__connection",{data:{},media_id:i.postId,sort_order:h});(h=a.get(h))==null?void 0:h.invalidateRecord()}}if(i.repliedToCommentId==null)return;h=c("igMapTypenameToRelayID")("XDTCommentDict",null,i.repliedToCommentId);f=a.get(h);b=(e=f==null?void 0:f.getValue("child_comment_count"))!=null?e:0;f==null?void 0:f.setValue(Number(b)+1,"child_comment_count")},variables:{connections:[i.repliedToCommentId==null?b:f],media_id:i.postId,request_data:{comment_text:e,replied_to_comment_id:i.repliedToCommentId}}})},[a,i,g,o,e,q,p]);return r}g["default"]=a}),98);
__d("PolarisCommentPostButton.react",["IGDSButton.react","Lexical","LexicalComposerContext","PolarisGenericStrings","react","usePolarisCommentSubmit"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=b.c;function a(a){var b=l(6);a=a.setIsLoading;var e=k(0),f=e[0],g=e[1];e=d("LexicalComposerContext").useLexicalComposerContext();var h=e[0];e=c("usePolarisCommentSubmit")(a);var m;b[0]!==h?(a=function(){h.registerUpdateListener(function(a){a=a.editorState;a.read(function(){g(d("Lexical").$getRoot().getTextContentSize())})})},m=[h],b[0]=h,b[1]=a,b[2]=m):(a=b[1],m=b[2]);j(a,m);if(f===0)return null;a=f===0;b[3]!==a||b[4]!==e?(m=i.jsx(c("IGDSButton.react"),{isDisabled:a,label:d("PolarisGenericStrings").POST_COMMENT_TEXT,onClick:e,variant:"primary_link"}),b[3]=a,b[4]=e,b[5]=m):m=b[5];return m}g["default"]=a}),98);
__d("PolarisImmersiveViewerCommentInputRefContext.react",["err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useContext;e.useMemo;var k=e.useReducer,l=e.useRef,m=e.c,n=i.createContext(null);function o(a,b){switch(b.type){case"setCommentInputRef":return babelHelpers["extends"]({},a,{commentInputRef:{current:b.ref}});default:throw c("err")("Unhandled action type: "+b.type)}}function a(a){var b=m(6);a=a.children;var c=l(null);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={commentInputRef:c},b[0]=c):c=b[0];c=k(o,c);var d=c[0];c=c[1];b[1]!==d?(c={dispatch:c,state:d},b[1]=d,b[2]=c):c=b[2];d=c;c=d;b[3]!==c||b[4]!==a?(d=i.jsx(n.Provider,{value:c,children:a}),b[3]=c,b[4]=a,b[5]=d):d=b[5];return d}function b(){var a=j(n);return a==null?void 0:a.state.commentInputRef}g.PolarisImmersiveViewerCommentInputRefContextProvider=a;g.usePolarisImmersiveViewerCommentInputRef=b}),98);
__d("PolarisLexicalCommentEmojiButton.react",["PolarisEmojiButton.react","react","usePolarisLexicalEmojiButton"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5),d=a.isOpen,e=a.onClose;a=a.onOpen;e=c("usePolarisLexicalEmojiButton")(e);var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1e558r4",b[0]=f):f=b[0];b[1]!==d||b[2]!==e||b[3]!==a?(f=j.jsx("div",{className:f,children:j.jsx(c("PolarisEmojiButton.react"),{color:"ig-secondary-text",isEmojiTrayOpen:d,onEmojiClick:e,setEmojiTrayOpen:a})}),b[1]=d,b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),98);
__d("PolarisLexicalCommentEnterKeyPlugin.react",["Lexical","LexicalComposerContext","react","usePolarisCommentSubmit"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState,k=b.c;function a(a){var b=k(5);a=a.setIsLoading;var e=d("LexicalComposerContext").useLexicalComposerContext(),f=e[0],g=c("usePolarisCommentSubmit")(a);e=j(0);var h=e[0],l=e[1];b[0]!==f||b[1]!==h||b[2]!==g?(a=function(){f.registerUpdateListener(function(a){a=a.editorState;a.read(function(){l(d("Lexical").$getRoot().getTextContentSize())})});return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(!(a==null?void 0:a.shiftKey)&&h!==0)g();else if(h===0)return!0;return!1},d("Lexical").COMMAND_PRIORITY_LOW)},e=[h,f,g],b[0]=f,b[1]=h,b[2]=g,b[3]=a,b[4]=e):(a=b[3],e=b[4]);i(a,e);return null}g["default"]=a}),98);
__d("PolarisLexicalCommentReplyPlugin.react",["Lexical","LexicalComposerContext","isStringNullOrEmpty","react","usePolarisLexicalCommentInputState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.c;function a(){var a=k(4),b=d("LexicalComposerContext").useLexicalComposerContext(),e=b[0];b=d("usePolarisLexicalCommentInputState").usePolarisLexicalCommentInputState();var f=b.repliedToUsername,g=j(!0),h;a[0]!==f||a[1]!==e?(b=function(){g.current===!0&&f==null?g.current=!1:(g.current=!1,e.update(function(){var a=d("Lexical").$getRoot();a.clear();if(!c("isStringNullOrEmpty")(f)){var b=d("Lexical").$createParagraphNode();b.append(d("Lexical").$createTextNode("@"+f+" "));b.selectEnd();a.append(b)}}))},h=[e,f],a[0]=f,a[1]=e,a[2]=b,a[3]=h):(b=a[2],h=a[3]);i(b,h);return null}g["default"]=a}),98);
__d("PolarisLexicalImmersiveViewerCommentInputRefPlugin.react",["LexicalComposerContext","PolarisImmersiveViewerCommentInputRefContext.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("LexicalComposerContext").useLexicalComposerContext();a=a[0];var b=d("PolarisImmersiveViewerCommentInputRefContext.react").usePolarisImmersiveViewerCommentInputRef();b!=null&&(b.current=a);return}g["default"]=a}),98);
__d("PolarisLexicalCommentInput.react",["FBLogger","IGDSBox.react","IGDSSpinner.react","IGDSText.react","Lexical","LexicalErrorBoundary","LexicalPlainTextPlugin","MLCComposer.react","MLCContentEditable.react","MLCFocusPlugin.react","MLCHistoryPlugin.react","PolarisCommentPostButton.react","PolarisGenericStrings","PolarisLexicalCommentEmojiButton.react","PolarisLexicalCommentEnterKeyPlugin.react","PolarisLexicalCommentInputStyles","PolarisLexicalCommentReplyPlugin.react","PolarisLexicalHashtagNode","PolarisLexicalHashtagPlugin.react","PolarisLexicalImmersiveViewerCommentInputRefPlugin.react","PolarisLexicalMentionNode","PolarisLexicalMentionsPlugin.react","PolarisLexicalTypeaheadContainer.react","PolarisUA","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useMemo;var k=b.useState,l=b.c,m={paragraph:(h||(h=c("stylex")))(c("PolarisLexicalCommentInputStyles").paragraph)};function a(a){var b=l(34),e=a.initialCommentText;a=a.initialFocus;var f=a===void 0?!0:a;a=k(!1);var g=a[0],i=a[1];a=k(!1);var n=a[0],o=a[1];a=k(!1);var p=a[0];a=a[1];var q;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(q={editable:!0,nodes:[d("PolarisLexicalMentionNode").PolarisLexicalMentionNode,d("PolarisLexicalHashtagNode").PolarisLexicalHashtagNode],onError:function(a){c("FBLogger")("ig_web").warn(String(a))},theme:m},b[0]=q):q=b[0];b[1]!==e||b[2]!==f?(q={editor:q,editorState:function(){var a=d("Lexical").$getRoot();a.append(d("Lexical").$createParagraphNode().append(d("Lexical").$createTextNode(e)));f===!0&&a.selectEnd()},policyProduct:"instagram",surface:"INSTAGRAM_WEB"},b[1]=e,b[2]=f,b[3]=q):q=b[3];q=q;q=q;var r;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(){o(!1),i(!0)},b[4]=r):r=b[4];r=r;var s;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(s=function(){o(!1),i(!1)},b[5]=s):s=b[5];s=s;var t;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(t=function(){o(!0)},b[6]=t):t=b[6];t=t;var u;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(u=function(){o(!1)},b[7]=u):u=b[7];u=u;var v;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("IGDSBox.react"),{alignItems:"center",width:"100%",children:j.jsx(c("IGDSSpinner.react"),{size:d("PolarisUA").isMobile()?"small":"medium"})}),b[8]=v):v=b[8];v=v;var w;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(w=d("PolarisGenericStrings").COMMENT_PLACEHOLDER_TEXT.toString(),b[9]=w):w=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{contentEditable:j.jsx(c("MLCContentEditable.react"),{"aria-placeholder":w,ariaLabel:d("PolarisGenericStrings").COMMENT_PLACEHOLDER_TEXT,placeholder:j.jsx("div",{className:(h||(h=c("stylex")))([c("PolarisLexicalCommentInputStyles").contenteditableCommon,c("PolarisLexicalCommentInputStyles").placeholder]),children:j.jsx(c("IGDSText.react").Body,{color:"secondaryText",textAlign:"start",children:d("PolarisGenericStrings").COMMENT_PLACEHOLDER_TEXT})}),xstyle:[c("PolarisLexicalCommentInputStyles").contenteditableCommon,c("PolarisLexicalCommentInputStyles").contenteditable]}),ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary}),b[10]=w):w=b[10];w=w;var x;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(x=(h||(h=c("stylex")))(c("PolarisLexicalCommentInputStyles").container),b[11]=x):x=b[11];p=p?v:w;b[12]!==p?(v=j.jsx("div",{className:x,children:p}),b[12]=p,b[13]=v):v=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(w=(h||(h=c("stylex")))(c("PolarisLexicalCommentInputStyles").controlsContainer),b[14]=w):w=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("PolarisCommentPostButton.react"),{setIsLoading:a}),b[15]=x):x=b[15];b[16]!==n?(p=d("PolarisUA").isDesktop()&&j.jsx(c("PolarisLexicalCommentEmojiButton.react"),{isOpen:n,modalSize:"large",onClose:u,onOpen:t}),b[16]=n,b[17]=p):p=b[17];b[18]!==p?(u=j.jsx("div",{className:w,children:j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",flex:"grow",paddingX:2,paddingY:1,position:"relative",children:[x,p]})}),b[18]=p,b[19]=u):u=b[19];b[20]!==g?(t=j.jsx(c("PolarisLexicalTypeaheadContainer.react"),{isDisabled:g,position:"above"}),b[20]=g,b[21]=t):t=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(n=j.jsx(c("MLCFocusPlugin.react"),{onBlur:r,onFocus:s}),w=j.jsx(d("MLCHistoryPlugin.react").MLCHistoryPlugin,{}),x=j.jsx(c("PolarisLexicalMentionsPlugin.react"),{}),p=j.jsx(c("PolarisLexicalHashtagPlugin.react"),{}),g=j.jsx(c("PolarisLexicalCommentReplyPlugin.react"),{}),r=j.jsx(c("PolarisLexicalCommentEnterKeyPlugin.react"),{setIsLoading:a}),s=j.jsx(c("PolarisLexicalImmersiveViewerCommentInputRefPlugin.react"),{}),b[22]=n,b[23]=w,b[24]=x,b[25]=p,b[26]=g,b[27]=r,b[28]=s):(n=b[22],w=b[23],x=b[24],p=b[25],g=b[26],r=b[27],s=b[28]);b[29]!==q||b[30]!==v||b[31]!==u||b[32]!==t?(a=j.jsxs(c("MLCComposer.react"),{initialConfig:q,children:[v,u,t,n,w,x,p,g,r,s]}),b[29]=q,b[30]=v,b[31]=u,b[32]=t,b[33]=a):a=b[33];return a}g["default"]=a}),98);